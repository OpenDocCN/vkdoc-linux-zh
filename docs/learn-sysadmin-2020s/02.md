# 二、改善管理体验的新工具

现在基础知识已经在第一章中介绍过了，我们可以开始寻找新的方法来改进你目前正在做的事情。这一章将重点介绍作为 Linux 系统管理员应该如何工作，应该考虑使用什么工具，以及这些工具如何提高效率。

本章将首先介绍任务管理，如何创建后台任务，以及如何在您需要离开一天时让任务保持运行。然后，我们将开始学习 Ansible 的基础知识。对于 Ansible，我们将只讨论最基本的内容来帮助您入门。在本书的后面，我们将深入探讨自动化。对于本章来说，如果您以前从未使用过 Ansible，那么让您快速了解它是非常重要的。然后，为了结束这一章，我们将看看哪些控制台可以用来简化 Linux 配置。

到本章结束时，你不仅会知道如何更好地管理任务，还会有一些开始自动化的基础知识。您还将看到除了传统的命令行选项之外的其他配置 Linux 的方法。

## 任务管理

Linux 操作系统本质上是一系列文件和进程，它们协同工作来帮助用户完成计算请求。这些过程需要偶尔进行管理。作为 Linux 用户，建议理解如何启动、停止进程，以及在需要时如何终止进程，有时是强制终止进程。

### 开始一个过程

可以通过多种方式启动一个进程；最常用的方法是启动一个服务。例如，启动 apache web 服务通常需要启动 httpd 服务。根据您的配置，该服务会产生一些 httpd 进程。然而，服务实际上只不过是一个脚本或一组命令，调用二进制文件，后跟参数。当查看您的流程时，参数通常会列在它的后面。

如上所述，启动 apache web 服务器需要一个服务命令。对于大多数 Linux 发行版，这将是一个 systemctl 命令:

```sh
# systemctl start httpd

```

要检查服务是否已经启动，可以用 status 参数替换 start 参数，或者可以检查正在运行哪些与名称 httpd:

```sh
# ps -ef | grep httpd

```

输出应该类似于

```sh
root      150274       1  0 22:48 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND
apache    150275  150274  0 22:48 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND
apache    150277  150274  0 22:48 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND
apache    150278  150274  0 22:48 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND
apache    150279  150274  0 22:48 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND
root      150506  108621  0 22:48 pts/2    00:00:00 grep --color=auto httpd

```

### 任务可视化工具

查看正在运行的进程对于了解您的系统正在做什么，或者是什么导致您的系统出问题非常重要。查看过程可以通过几种方式完成。您可以使用默认安装的实用程序，也可以使用 ps 命令并搜索您的进程。在 Fedora 上，我在安装下面提到的包时没有遇到任何问题。

#### 顶端

我用过的几乎所有 Linux 发行版都默认安装了 Top。执行命令“top”应该会产生类似于以下内容的输出:

```sh
# top
top - 21:51:30 up 35 days, 22:34,  1 user,  load average: 4.80, 5.38, 3.13
Tasks: 423 total,   1 running, 421 sleeping,   0 stopped,   1 zombie
%Cpu(s):  8.8 us,  6.9 sy,  0.0 ni, 81.9 id,  0.0 wa,  1.8 hi,  0.6 si,  0.0 st
MiB Mem :  23679.7 total,   1453.4 free,  11263.9 used,  10962.5 buff/cache
MiB Swap:   8192.0 total,   8190.8 free,      1.2 used.  10835.9 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
   3219 ken       20   0   17.3g 237396 144936 S  16.9   1.0 106:56.90 chrome
   1033 root     -51   0       0      0      0 D  10.6   0.0  21:58.24 irq/136-rmi4_sm
 129564 ken       20   0   20.6g 323744 123548 S   9.9   1.3  14:31.80 chrome
  29109 ken       20   0 4450712 196656 105148 S   9.3   0.8  34:17.92 cinnamon
   2021 ken       20   0 1051020 103268  62488 S   8.6   0.4  37:08.53 Xorg
 108567 ken       20   0  754204  42076  30860 S   3.3   0.2   0:08.86 gnome-terminal-
   3171 ken       20   0   16.9g 489020 192036 S   1.7   2.0  66:08.40 chrome
   3220 ken       20   0   16.5g 131584  92976 S   1.0   0.5  28:09.36 chrome
 151128 root      20   0  236260   5568   4376 R   1.0   0.0   0:00.15 top
 150042 root      20   0       0      0      0 I   0.7   0.0   0:08.40 kworker/1:2-events
     14 root      20   0       0      0      0 I   0.3   0.0   1:09.19 rcu_sched
   1140 dbus      20   0   13396   9064   2644 S   0.3   0.0   0:20.92 dbus-broker
   3177 ken       20   0    7768   4120   3304 S   0.3   0.0   2:19.38 cgroupify
   3532 ken       20   0   20.7g 404148 123592 S   0.3   1.7  12:04.38 chrome
  49421 systemd+  20   0   17712   8712   7832 S   0.3   0.0   1:25.22 systemd-oomd
  83705 ken       20   0   20.6g 119640  79348 S   0.3   0.5   0:11.45 chrome
  97202 ken       20   0   20.6g 147012  97388 S   0.3   0.6   0:13.16 chrome

```

#### 顶级产品的替代品

如果你想尝试不同的东西，除了“top”还有几个选择(表 2-1 )。就个人而言，我已经尝试并使用了一些，但总是默认为 top，主要是因为我工作的系统不是我自己的。如果你以前没有尝试过表格 2-1 中的替代方案，我建议你安装并亲自看看它们是否能给你的工作方式带来任何好处。

表 2-1

顶级产品的替代品

<colgroup><col class="tcol1 align-left"> <col class="tcol2 align-left"></colgroup> 
| 

首选方案

 | 

描述

 |
| --- | --- |
| `atop` | 交互式工具，显示系统的负载和其他有用信息 |
| `htop` | 非常类似于顶部，除了您可以使用鼠标垂直或水平滚动 |
| `glances` | 一种监控工具，用于在一个屏幕上显示尽可能多的信息。如果您想查看有关传感器的信息，这很有用 |
| `bpytop` | 非常好的自定义工具，有一个基于文本的界面。该实用程序将要求您下载源代码并编译 |

#### 工具

nmon 是帮助诊断系统问题的另一个非常有用的工具。默认情况下，它通常不会安装，但可以安装在大多数平台上。nmon 有一个非常清晰的方法来显示 CPU、内存、磁盘和内核等等。这绝对是我推荐使用的工具。

### 杀戮过程

偶尔，可能需要杀死一个进程；这可能是从挂起的线程到内存泄漏的进程的任何情况。在您终止这个进程之前，请始终自问终止这个进程是否是终止您的进程的最佳方式。我确实明白，有时候没有别的选择，任务必须杀。但是，千万不要强行终止一个进程。总是从尝试使用 systemctl 或类似的服务命令开始。一些应用程序或实用程序有自己的定制工具，也可以使用。阅读官方文档或手册页，看看是否有推荐的方法。

我在过去经历过，一些系统管理员并不总是理解终止一个进程的含义。我曾经和一位系统管理员一起工作，他认为强行终止 PostgreSQL 数据库进程是一个好主意，这是他停止数据库服务的主要方法。这不仅吓了我一跳，还让我看到系统管理员真的不知道如果他坚持这种行为，会给自己带来什么后果。作为当时和他一起工作的顾问，我向他解释了为什么这是一个可怕的想法，然后带他走了正确的程序。

如果您不得不终止一个进程，请务必遵循以下步骤:

1.  使用“top”或“ps”等进程查看工具获取进程 ID

2.  尝试使用不带参数的 kill 命令礼貌地终止进程。这将默认使用“TERM”信号，这有效地告诉进程它将被终止，如果它有任何处理程序，它们将在终止之前尝试运行清理任务。

1.  如果“好”的方法不起作用，你可以应用大锤方法。这将强制终止该进程，并且无法捕获终止事件，这意味着该进程将无法运行任何清理作业。

```sh
kill <process id>

```

```sh
kill -9 <process id>

```

kill 命令还有许多其他信号选项，每种选项用于不同的情况。“`kill -l`”命令将给出可使用的所有信号的列表。

### 僵尸进程

我们先来了解一下什么是僵尸进程。僵尸进程是指一个进程已经被杀死，并且它的内存描述符 EXIT_ZOMBIE 还没有被它的父进程清除。这通常是在父进程执行 wait()系统调用来读取死进程的退出状态和任何其他信息时完成的。wait()完成后，EXIT_ZOMBIE 内存描述符被清除。如果没有做到这一点，通常是因为父进程行为不当或编码不当。

我曾经听到过一个非常简单的杀死僵尸进程的解释。

“你不能杀死已经死去的东西。”

如果你考虑一下僵尸进程实际上是什么，这就很有意义了。它只不过是一个没有被清除的内存描述符。再多的 kill 命令也无法清除它。你需要找到内存中的内存描述符并自己清除它，我们都知道，没有人会费心去做。不幸的是，清除僵尸进程需要重启。

要找到僵尸进程的根本原因，需要查看进程死亡的应用程序。代码写得很差吗？父进程先死了吗？根据我的经验，这通常是由于另一个进程或应用程序破坏了进程，导致系统不稳定。

像“`top`”这样的实用程序有一个专门的区域来显示僵尸进程。如果您看到僵尸进程出现，那么您的系统有一个更大的问题需要解决。第十一章，我们将讨论如何诊断问题并找到解决方案。

### 后台任务

服务在启动时会创建后台运行任务，这主要是因为没有系统管理员希望活动会话一直运行，而且这样做实在是太傻了。

后台任务可以通过查看 top 之类的工具或者运行 ps 命令来查看，但是要发送一个任务到后台需要做什么呢？当您启动一个长时间运行的流程并需要执行其他任务时，会发生什么情况？您可以打开一个新窗口或控制台，并在那里运行任务。但是，更好的方法是将当前任务发送到后台。以下是将当前正在运行的任务发送到后台的基本步骤:

1.  按下“CTRL + Z”键。
    *   这告诉 Linux 操作系统暂停当前任务，并将用户返回到 shell。

2.  一旦回到 Shell，执行命令“`bg`”。
    *   该命令将当前暂停的任务发送到后台并继续运行。

如果您想将后台任务带回到前台，只需执行“`fg`”命令。

### 运行耗时的任务

作为系统管理员，您经常需要运行需要很长时间才能执行的脚本或任务。有时候，如果你在笔记本电脑上运行这些长时间的任务，并且你想离开一天，那么运行这些任务会非常令人沮丧。幸运的是，如果使用正确的工具，您不必等到任务完成。

有几个工具可以帮助你完成耗时的任务，让你重新享受工作之外的生活。

#### 屏幕

许多人使用的一个非常流行的多任务工具是“`screen`”大多数 Linux 系统管理员都使用过或者至少知道"`screen`"，并且很可能已经知道了基本知识，但是对于那些不熟悉 Linux 的人来说，" screen "是一个允许用户创建作为后台进程运行的会话的工具。用户可以根据自己的意愿断开并重新连接到会话，这意味着当用户断开连接并回家时，长时间运行的脚本或进程可以在屏幕会话中保持运行。在过去，任务或流程会被绑定到用户的会话，一旦用户断开连接，任务就会被终止。

Screen 可以在大多数发行版中找到，并且可以通过尝试安装一个名为“screen”的包来非常简单地进行安装。

要以非常基本的方式使用屏幕，您需要知道的只是表 2-2 中列出的命令。

表 2-2

如何使用“屏幕”

<colgroup><col class="tcol1 align-left"> <col class="tcol2 align-left"></colgroup> 
| 

命令

 | 

描述

 |
| --- | --- |
| `screen` | 开始新的屏幕会话 |
| `ctrl + a followed by d` | 断开您与正在运行的屏幕会话的连接，但保持会话运行 |
| `screen -list` | 列出所有屏幕会话 |
| `screen -r <session name>` | 重新连接到正在运行的屏幕会话 |

Note

应该注意的是，一些发行版已经在他们的一些新版本中停止发布“screen ”,但是该包仍然可以在社区库中获得。

#### Tmux 的

随着“`screen`”的可用性降低，正在使用的新工具是“`tmux`”“T2”和“屏幕”一样，允许用户断开连接并重新连接到会话，只是“tmux”有非常丰富的功能。我个人现在在我所有的 Linux 平台上都使用“`tmux`”。这些命令已经变成了肌肉记忆，当我在一个没有`tmux`的系统上工作时，我经常感到失落这听起来很奇怪，但是作为一名 Linux 系统管理员，我们经常被要求解决问题，这涉及到多任务处理的能力。我们可能需要一个窗口运行观察命令，另一个窗口跟踪日志。当你有大量的应用程序在运行时，在这些窗口之间切换会很混乱。所以为了避免这种情况，使用“tmux”允许我在 tmux 中创建一个分屏和新窗口。我能够在会话之间切换，最棒的是，我不必离开舒适的命令行。

与“`screen`”非常相似，“在开始使用“`tmux`”时，您需要知道一些基本命令。”在那里，您可以通过阅读手册页或帮助来扩展您的理解。

表 2-3 列出了您在日常活动中会用到的一些常用命令。

表 2-3

如何使用“tmux”

<colgroup><col class="tcol1 align-left"> <col class="tcol2 align-left"></colgroup> 
| 

命令

 | 

描述

 |
| --- | --- |
| `tmux` | 启动新的 tmux 会话 |
| `ctrl + b + d` | 从正在运行的会话中断开连接 |
| `tmux list-sessions` | 列出所有 tmux 会话 |
| `ctrl + b + %` | 垂直拆分屏幕 |
| `ctrl + b + "` | 水平分割屏幕 |
| `ctrl + b + w` | 在 tmux 中显示一个窗口，其中包含所有 tmux 会话供您切换到 |
| `ctrl + b + arrow keys` | 允许您调整窗口大小 |

## 可译简介

在过去的十年中，Linux 系统管理员的角色已经演变成自动化工程师的角色。越来越多的系统管理员正在编写自动化代码。传统的 Linux 系统管理角色正慢慢变得不如以前重要。你可能正在读这本书，因为要么你正在努力学习你应该做些什么来在快速发展的 Linux 世界中保持相关性，要么你是 Linux 新手并且想要学习如何开始。

这两个问题的答案都是自动化，尤其是 Ansible。如今，系统修补或系统配置等标准任务都是自动化的，需要的手动干预更少。Linux 系统管理员不仅仍然需要了解如何配置 Linux，而且现在还需要知道如何自动化这些配置。Ansible 是当今最受欢迎的自动化工具之一，如果你开始熟悉它，它将对你的职业发展大有裨益。在本书的后面有一个专门的章节是关于自动化的，在那里我们将会更深入地研究自动化的实践。在这一节中，我们只是简单地看一下 Ansible 的基础知识。

### 安装 Ansible

幸运的是，与其他一些自动化工具相比，安装 Ansible 并不太复杂。这确实很有意义，因为使用 Ansible 的驱动因素之一是使用它更容易的学习曲线。

Ansible 有两种安装方式。

#### 包装管理

安装 Ansible 的第一个也是最简单的方法是通过你的发行版包管理系统，比如 dnf 或 apt。

简单地尝试安装 Ansible 包就可以在大多数社区发行版上运行，因为它们的标准库中通常都有 Ansible。然而，像 Red Hat Enterprise Linux 这样的企业发行版需要单独的订阅和对不同存储库的访问。对于这些发行版，请确保遵循它们的官方文档，了解如何启用所需的库。

Note

通过包管理系统安装 Ansible 是推荐的方法，因为这不仅安装了 Ansible 二进制文件，还为您的 Linux 系统准备了所有其他支持 Ansible 的配置文件，允许您在最佳配置下工作。

#### 点

安装 Ansible 的另一种方法是通过 Python 首选安装程序，或通常称为 pip。除了安装 pip 本身之外，不需要订阅或不同的存储库。一旦安装了 pip，就可以通过 pip 安装命令安装 Ansible。

Note

当通过 pip 安装时，一定要检查 pip 将要安装到的 Python 版本。

### 配置 Ansible

Ansible 的核心是您编写的执行任务的 YAML。为此，您几乎不需要配置什么。如果你是通过一个包管理系统安装 Ansible 的，比如 dnf 或者 apt，你会得到为你创建的配置文件。如果您通过 pip 安装或下载二进制文件，您将需要自己创建配置文件。

Ansible 配置文件称为 ansible.cfg，可用于在其限制范围内自定义 ansible。例如，如果您希望配置非标准环境，可以配置存储插件或清单文件的位置。

然而，配置文件确实需要存储在特定的位置，以便 Ansible 能够在没有被告知的情况下读取它们。Ansible 还将遵循一个层次结构，在这个层次结构中，Ansible 将首先读取文件。

您可以在以下位置创建 Ansible 配置文件。Ansible 也是按照这个顺序读取配置文件的。如果它没有找到第一个，它将继续下一个。如果 Ansible 没有找到配置文件，它将采用默认值。

*   ansible.cfg 文件放在您正在工作的当前目录中。

*   用户主目录中的. ansible.cfg。

*   创建/etc/ansible/ansible.cfg。

还可以通过设置 ANSIBLE_CONFIG 环境变量来告诉 Ansible 在哪里可以找到配置文件。

Note

在用户的主目录中创建 Ansible 配置文件时，务必将该文件命名为“. ansible.cfg”而不是“ansible.cfg”。如果文件不以“.”开头，它将被忽略。

### 易变库存

在使用 Ansible 之前，您需要知道如何定位 Ansible 将在其上执行命令或任务的系统。在 Ansible 中，我们在库存文件的帮助下完成这项工作。如果 Ansible 是从软件包管理系统安装的，则创建的缺省清单文件是/etc/ansible/hosts。这个文件可以按原样使用，或者您可以编辑 ansible.cfg 来告诉 ansible 库存文件的位置。指定 Ansible 在哪里可以找到库存文件的另一种常见方法是在执行带有“-i”参数的“ansible”或“ansible-playbook”命令时完成的，后跟库存文件的路径。

可回应清单文件的基本布局由方括号中的组名组成，后跟属于该组的系统列表。在以下示例中，两台服务器属于“webserver”组，一台属于“database”组:

```sh
[webserver]
servera
serverb

[database]
serverc

```

### 运行 Ansible

Ansible 命令行工具由几个二进制文件组成。两个常用的是“ansible”和“ansible-playbook”“ansible”命令可用于直接对主机执行单个特别命令，而“ansible-playbook”命令可用于执行包含许多 ansible 任务的剧本。用于 ping 清单文件中所有主机的专用 Ansible 命令示例如下:

```sh
ansible all -m ping

```

要运行行动手册，您可以使用类似下面的内容:

```sh
ansible-playbook -i /path/to/inventory /path/to/playbook.yaml

```

Ansible 运行起来相对简单，使用它不需要任何配置。要熟悉 Ansible，首先运行一些特定的 Ansible 命令，然后继续创建您自己的剧本。

### 剧本

一旦您完成了运行 Ansible 即席命令，您将希望继续创建行动手册。简单地说，剧本是一种一个接一个地运行多个可完成的任务的方式。Ansible 剧本需要从指定任务将在其上执行的主机或组开始。还可以添加一个变量文件或变量列表，但是对于一个非常简单的剧本来说，这并不是必须的。以下是行动手册的基本示例:

```sh
---
- name: "Install webserver"
  host: webserver
  tasks:
    - name: "Install httpd"
      yum:
        name: "httpd"
        state: present

```

### 角色

行动手册可能会变得非常复杂，并且经常会有您想要重用代码的时候。这就是可变角色变得有用的地方。Ansible 角色是使用 Ansible 完成特定工作的一种方式。这可能像安装一个包一样简单，也可能像部署整个云平台一样复杂。通常，一个写得很好的 Ansible 角色应该开箱即用，执行起来没有问题。应该配置一个默认变量，这样，如果用户不做任何设置，角色仍然会运行。一个好的可回答角色还应该包括一个 README.md 文件，其中包含如何使用该角色的说明。该角色还应该包括 Ansible Galaxy 可以使用的元数据。

#### 角色目录结构

角色目录结构应该类似于以下内容，但也可以简化为至少只有任务目录。完整的结构包括并不总是需要的附加目录，如 vars 目录或 templates 目录:

```sh
[Role name]
 ->  [tasks]
   --> main.yaml
 ->  [defaults]
   --> main.yaml
 ->  [handlers]
   --> main.yaml
 ->  [meta]
   --> main.yaml
 ->  [vars]
   --> main.yaml

```

Note

Ansible 角色名通常应该以“ansible-role-”开头，然后是您希望对角色的称呼。

#### 生成可变角色

作为 Ansible 的一部分安装的另一个二进制文件是“ansible-galaxy”二进制文件。这个二进制文件可以用来管理角色和集合。这包括生成一个可回答的角色框架的能力。要创建一个基本的角色结构来开始您的角色开发之旅，请运行以下命令:

```sh
# ansible-galaxy init <your role name>

```

### 模块

Ansible 模块是 Ansible 的另一个重要方面，但没有多少人理解。如果一个可转换的角色可以被看作是一个工具箱，那么可转换的模块可以被看作是螺母和螺栓。

在几页前的“行动手册”部分，有一个行动手册示例。在示例中，我使用了“yum”模块来安装“httpd”包。这个“yum”模块是标准 Ansible 集合的一部分，不需要任何额外的安装。本例中的“yum”模块告诉正在执行该剧的系统(“webservers”)使用“yum”二进制文件来安装“httpd”包。

有些模块比“yum”模块复杂得多，使用起来也更复杂。幸运的是，Ansible 文档相当不错，它很好地解释了一个模块通常具有的所有参数和选项。要查看文档，您可以进行快速的互联网搜索或使用 Ansible 的命令行帮助。例如，查看 yum 模块的帮助:

```sh
# ansible-doc yum

```

Ansible 模块通常是用 Python 编写的。从技术上讲，它们可以用任何开发语言来开发，只要所用的语言能够输出 JSON。模块应该执行单个任务，并且必须返回任务的结果。将模块写成幂等的也是非常重要的。

### 分享你的答案

共享 Ansible 的知识和代码使得 Ansible 可能成为当今最好的自动化工具。社区在开发 Ansible 模块方面的努力令人惊讶，来自各个角落的供应商贡献代码来促进 Ansible 的采用。不仅仅是供应商，像我们这样的系统用户也在为你能想到的几乎任何东西创建可转换的模块。

Note

一旦你对 Ansible 更熟悉了，考虑把你的代码还给 Ansible Galaxy 之类的地方。

#### 不稳定星系

Ansible Galaxy 是与世界分享你的答案的绝佳方式。这不仅能让你的名字被其他人认出来，还能增加每个人都可以使用的不断增长的 Ansible 库。

当需要编写一个新的 Ansible 角色或模块时，总是从搜索 Ansible Galaxy 开始，寻找任何你可以使用的东西，或者至少从它开始。

## Web 控制台

Linux 系统管理传统上包括通过 ssh 登录系统，并运行各种命令行命令来根据需要配置平台。这在今天仍然可以实现，但是随着 Linux 的发展。系统配置总是会发展到包括更易于使用的方法，以适应新用户学习 Linux。

### 战场

任何构建和配置过 Linux 服务器的人都会非常清楚，桌面往往不会在服务器平台上被大量使用。大多数时候，所需要的只是 ssh 和服务器执行其功能所需的任何软件。由于这个原因，需要有一个桌面的替代品来实现更快更简单的图形用户界面配置。

这就是驾驶舱变得有用的地方。Cockpit 允许 web 控制台访问 Linux 服务器。在 web 控制台中，用户能够配置存储、网络和各种其他配置。用户还可以打开系统的终端会话并运行命令行命令。

Cockpit 通常只在服务器平台上使用，但是可以安装在任何支持使用 cockpit 的平台上。

#### 装置

与 Linux 上的大多数软件安装非常相似，建议使用您的软件包管理系统安装“cockpit”。在 Red Hat Enterprise Linux 上，这将是 yum 或 dnf，而在 Ubuntu 上，您将使用 apt。以下是 RHEL 或 Fedora 的安装:

```sh
# yum install cockpit -y

```

#### 配置

安装后，确保“驾驶舱”服务已启用并启动:

```sh
# systemctl enable cockpit && systemctl start cockpit

```

检查“驾驶舱”正在运行:

```sh
# systemctl status cockpit
# netstat -nap | grep LIST

```

最后，如果您的防火墙正在运行，请确保端口 9090 已经为 tcp 流量开放:

```sh
# firewall-cmd --list-all

```

#### 使用驾驶舱

安装和配置完成后，您应该能够打开 web 浏览器，并使用端口 9090 输入您的 Linux 系统的主机名或 IP 地址:

https:// <hostname or="" ip="">:9090</hostname>

web 控制台现在应该会打开并要求提供凭据。用户名和密码可以是任何本地用户，如果您知道 root 密码，也可以使用它。

在“驾驶舱”，您可以配置您的网络接口，通过 NFS 或 iSCSI 添加存储，并查看日志。有几个不错的功能，比如从 web 控制台加入域，并查看系统上安装了什么应用程序。大多数配置都是不言自明的，足够简单易懂。

#### 限制

cockpit 的一个主要限制是，它是正在运行的 Linux 服务器的 web 控制台，这简单地意味着服务器必须正在运行，并且“Cockpit”服务需要工作。您不能使用“驾驶舱”来解决引导问题，也不能使用“驾驶舱”来安装任何虚拟机。

### 驾驶舱的替代方案

在开源世界中有一个项目的地方，肯定会有更多类似的项目。这与 Linux web 控制台管理完全相同。虽然驾驶舱是常用的选项，并提供了相当不错的功能，但值得一提的是一些可以使用的替代方案。

Note

由于 Linux 是开源的，我的建议和选择将是非专有软件和一般的开源产品。即使有很好的专有选择，它们也会让你去寻找和阅读。

#### Webmin(网站管理员)

与 Cockpit 非常相似，您可以配置各种配置选项，如添加新用户或启动和停止服务。Webmin 的缺点是产品更新发布周期较慢。Cockpit 的目标是每两周发布一次版本，Webmin 可以长时间不更新。然而，这也可以被视为一件好事。最好的建议是自己比较这些产品，看看什么最适合你。

#### 艾恩特

另一个替代驾驶舱的非常好的网络控制台是 Ajenti。与 Webmin 和 Cockpit 非常相似，Ajenti 提供了一个简洁易用的 web 控制台，允许用户配置它所安装的 Linux 平台。所有这些 web 控制台都存在相同的限制，并且只为安装它的系统提供配置。

## 文本控制台

如果 web 控制台不适合你，那么文本 UI 工具可能更适合你。当用户不熟悉所有命令行参数时，文本控制台或“tui”工具为用户提供了快速配置选项。一个很好的例子是过去在 RHEL 上配置身份验证。在 RHEL 配置的早期，您需要挖掘帮助，并计算出使您的命令成功所需的各种参数。现在，运行文本用户界面进行身份验证可以让您选择或取消选择所有选项。除了连接细节之外，您不需要记住任何参数。配置更快更简单，出错空间更小。在压力下我会给你一些建议。

### 安装

对于所有的 tui 控制台，不只是安装一个软件包。如果没有安装标准的“tui”包，每个应用程序都需要提供自己的“tui”。

使用 Linux 系统的软件包管理系统，尝试通过在软件包名称的末尾添加“-tui”来安装“tui”。例如，尝试使用网络管理器文本用户界面。如果软件包未安装，请尝试安装以下软件:

```sh
# yum install nm-tui -y

```

### 使用

文本控制台使用起来非常简单，并且通常不言自明。了解它们的最好方法是开始使用它们。我个人一直在使用 network manager“tui”来配置网络配置，主要是因为它更快，我需要记住的东西更少。

## 摘要

在本章中，向您介绍了以下内容:

*   如何在 Linux 系统上管理任务，以及如何处理后台任务。

*   Ansible 基础知识，以及如何在几个小时内熟练掌握 Ansible。

*   web 控制台带来的管理 Linux 平台的能力。

*   不是所有的事情都要用一个长命令和一百万个参数来完成。文本控制台可以节省时间和精力。