# 十六、MIDI

MIDI 是电子版的乐谱。它基本上是一组指令，告诉 MIDI 演奏者演奏哪些音符，声音有多大，使用哪些乐器，使用什么效果，以及何时停止演奏音符。

MIDI 有两种形式:一种是“wire”格式，在这种格式中，MIDI 命令通过流发送，并在接收时进行处理；另一种是文件格式，在这种格式中，MIDI 命令存储在文件中，并从文件中读取和播放。

发明 MIDI 是为了让乐器能够交流，让一种乐器能够控制另一种乐器。它在电子音乐中被大量使用，但通常适用于任何电子乐器。当然，如果有合适的软件，计算机可以被认为是 MIDI 乐器。

## 资源

以下是一些资源:

*   计算机音乐导论:第一卷:第三章，【迷笛】( [`www.indiana.edu/~emusic/etext/MIDI/chapter3_MIDI.shtml`](http://www.indiana.edu/~emusic/etext/MIDI/chapter3_MIDI.shtml) )
*   MIDI 制造商协会:教程( [`www.midi.org/aboutmidi/tutorials.php`](http://www.midi.org/aboutmidi/tutorials.php) )
*   Ted 的 Linux MIDI 指南( [`http://tedfelix.com/linux/linux-midi.html`](http://tedfelix.com/linux/linux-midi.html)
*   标准 MIDI 文件格式规范。1.1 ( [`www.cs.cmu.edu/~music/cmsip/readings/Standard-MIDI-file-format-updated.pdf`](http://www.cs.cmu.edu/~music/cmsip/readings/Standard-MIDI-file-format-updated.pdf)

## MIDI 系统的组件

一个 MIDI 系统可以是一个单独的乐器，既产生又消耗 MIDI 事件。通常所说的合成器通常有一个键盘和多个控制来生成 MIDI 事件，也有硬件来从这些控制中产生声音。

### 合成器

抽象地说，合成器是 MIDI 事件的消费者，也是声音的生产者，通过扬声器或耳机。合成器可以在硬件中实现这一点，但也可以使用被称为声音字体的表格在软件中实现。声音字体有很多种，我们将在下一章讨论。

### 顺序

合成器对 MIDI 事件做出实时反应。其中最重要的是演奏音符的事件。现在，活页乐谱使用不同种类的音符(钩针、八分音符等等)来表示持续时间。MIDI 改为使用`NOTE ON`和`NOTE OFF`事件。

这些音符事件不能一次全部发送到合成器，否则它会尝试一次播放它们。比方说，如果 MIDI 事件是由一个人在键盘上产生的，那么他们就控制它们如何被发送。

在这本书里，你将会看到 MIDI 事件存储在一个文件里的情况。因此，文件阅读器必须控制事件发送到合成器的时间。定序器的作用是在适当的时间向合成器发送事件。

### 其他组件

一个最小的系统将由一个音序器(一个人或一个组件)在正确的时间发送 MIDI 到合成器。不过，可能还有其他组件，包括架子鼓、产生混响或延迟等声音效果的设备，或者预先录制或数字化音频并可以回放的采样器。

## MIDI 事件

MIDI 事件有几种类别。对我们来说，主要的事件是程序变更事件、注释事件和元事件。

### 程序变更事件

乐器或“声音”与通道相关联。声音和频道之间的建立通常在播放开始时完成，但是可以通过节目改变事件来改变。

### 记录事件

注意事件不是`NOTE ON`就是`NOTE OFF`。它们包括一个选择演奏乐器的频道。他们有一个代表音符的数字。从 0 到 127 共有 128 个，它们对应于音符 C0(8.175 赫兹)到 G10(12543.854 赫兹)。这些值是可以改变的，例如，对于微型音乐，但这超出了本书的范围。音符事件也包含力度，它给出音符的音量。

### 元事件

有一组元事件给出了关于 MIDI 系统演奏的信息。这些包括版权声明和序列或曲目名称，但对 Karaoke 最重要的是歌词和文本事件。

这些元事件不通过网络发送。比方说，合成器不知道如何处理版权声明。元事件包含在 MIDI 文件中，可以被从文件中读取的任何东西解释。

这导致了序列器的行为差异，当您查看 Karaoke 系统时会遇到这种差异:一些序列器提供元信息，如 Java 序列器。其他的没有，比如`fluidsynth`。

## 结论

MIDI 系统早在 20 世纪 80 年代就已经出现了。从这个意义上说，它们是“旧的”技术，并且经常提出替换建议。然而，MIDI 仍然是一种持久的电子格式。本章介绍了 MIDI 系统的组成部分，并给出了 MIDI 信息的抽象视图。