附录 A

![image](../Images/image00264.jpeg)

外壳变量

该列表摘自`bash`手册页，并经过编辑成为一个独立的文档。以下变量由`bash`设定。

尝试

扩展到用于调用这个`bash`实例的完整的文件名。

巴什 PID

扩展到当前`bash`进程的进程 ID。这在某些情况下不同于`$$`，比如不需要`bash`重新初始化的子外壳。

BASH _ 别名

一个关联数组变量，其成员对应于由别名内置维护的内部别名列表。添加到此数组的元素出现在别名列表中；取消设置数组元素会导致别名从别名列表中删除。

ARGC 巴什

一个数组变量，其值为当前`bash`执行调用栈中每一帧的参数个数。当前子程序(shell 函数或用`.`或 source 执行的脚本)的参数数量在堆栈的顶部。当一个子程序被执行时，传递的参数数被推送到`BASH_ARGC`。shell 仅在扩展调试模式下设置`BASH_ARGC`(参见`bash`手册页中对`shopt`内置的`extdebug`选项的描述)。

BASH_ARGV 函数

包含当前`bash` 执行调用栈中所有参数的数组变量。最后一个子例程调用的最后一个参数在栈顶；初始调用的第一个参数在底部。当子程序被执行时，所提供的参数被推送到`BASH_ARGV`上。shell 仅在扩展调试模式下设置`BASH_ARGV`(参见`bash`手册页中对`shopt`内置的`extdebug`选项的描述)。

CMDS 巴什

一个关联数组变量，其成员对应于哈希内置维护的命令内部哈希表。添加到此数组的元素出现在哈希表中；取消设置数组元素会导致命令从哈希表中删除。

BASH _ 命令

当前正在执行或即将执行的命令，除非外壳由于陷阱而正在执行命令，在这种情况下，它是陷阱发生时正在执行的命令。

BASH _ 执行 _ 字符串

`-c`调用选项的命令参数。

BASH_LINENO

一个数组变量，它的成员是对应于`FUNCNAME`每个成员的源文件中的行号。`${BASH_LINENO[$i]}`是源文件中调用`${FUNCNAME[$i]}`的行号(如果在另一个 shell 函数中引用，则为`${BASH_LINENO[$i-1]}`)。对应的源文件名是`${BASH_SOURCE[$i]}`。使用`LINENO`获取当前行号。

BASH _ 重赛

一个数组变量，其成员由`=~`二元运算符分配给`[[`条件命令。索引为`0`的元素是字符串中匹配整个正则表达式的部分。索引为`n`的元素是字符串中匹配第 n 个带括号的子表达式的部分。此变量是只读的。

BASH_SOURCE

一个数组变量，其成员是对应于`FUNCNAME`数组变量中元素的源文件名。

BASH_SUBSHELL

每产生一个子外壳或子外壳环境就增加 1。初始值为 0。

BASH _ versi info

一个只读数组变量，其成员保存了`bash`实例的版本信息。分配给数组成员的值如下:

*   `BASH_VERSINFO[0]`:主要版本号(发布)
*   `BASH_VERSINFO[1]`:次要版本号(版本)
*   `BASH_VERSINFO[2]`:补丁级别
*   `BASH_VERSINFO[3]`:构建版本
*   `BASH_VERSINFO[4]`:发布状态(如`beta1`)
*   `BASH_VERSINFO[5]`:`MACHTYPE`的值

BASH_VERSION

扩展为描述这个`bash`实例版本的字符串。

COMP_CWORD

包含当前光标位置的单词的`${COMP_WORDS}`索引。该变量仅在由可编程完成工具调用的 shell 函数中可用(参见`bash`手册页中的“可编程完成”)。

复合键

用于调用当前完成功能的键(或键序列的最后一个键)。

COMP_LINE

当前命令行。此变量仅在可编程完成功能调用的外壳函数和外部命令中可用(参见`bash`手册页中的“可编程完成”)。

红利点数

当前光标位置相对于当前命令开头的索引。如果当前光标位置在当前命令的末尾，该变量的值等于`${#COMP_LINE}`。该变量仅在可编程完成工具调用的 shell 函数和外部命令中可用(参见`bash`手册页中的“可编程完成”)。

组件类型

设置一个整数值，对应于导致调用补全函数的补全尝试类型:`TAB`用于正常补全，`?`用于在连续制表符后列出补全，`!`用于列出部分单词补全的备选项，`@`用于列出单词未被修改的补全，或者`%`用于菜单补全。该变量仅在可编程完成工具调用的外壳函数和外部命令中可用(参见`bash`手册页中的“可编程完成”)。

COMP_WORDBREAKS

执行单词补全时，`readline`库将其视为单词分隔符的字符集。如果`COMP_` `WORDBREAKS` 未置位，它将失去其特殊属性，即使它随后被复位。

比较词

由当前命令行中的单个单词组成的数组变量(参见`bash`手册页中的“数组”)。如前所述，使用 `COMP_WORDBREAKS`将该行拆分成单词。该变量仅在可编程完成工具调用的外壳函数中可用(参见`bash`手册页中的“可编程完成”)。

DIRSTACK 先生

包含目录堆栈当前内容的数组变量(参见`bash`手册页中的“数组”)。目录按照`dirs`内置程序显示的顺序出现在堆栈中。分配给这个数组变量的成员可以用来修改栈中已经存在的目录，但是`pushd`和`popd`内置必须用来添加和删除目录。给这个变量赋值不会改变当前目录。如果`DIRSTACK`未被设置，它将失去其特殊属性，即使它随后被重置。

-你好

扩展到当前用户的有效用户 ID，在 shell 启动时初始化。此变量是只读的。

FUNCNAME

一个数组变量，包含当前执行调用堆栈中所有 shell 函数的名称。索引为 0 的元素是任何当前正在执行的 shell 函数的名称。最底层的元素是`main`。该变量仅在 shell 函数执行时存在。对`FUNCNAME`的赋值无效，并返回一个错误状态。如果`FUNCNAME`未被设置，它将失去其特殊属性，即使它随后被重置。

组

一个数组变量，包含当前用户所属的组的列表。对`GROUPS`的赋值无效，并返回一个错误状态。如果`GROUPS`未置位，它将失去其特殊属性，即使它随后被复位。

HISTCMD

当前命令的历史编号，或历史列表中的索引。如果`HISTCMD`未置位，它将失去其特殊属性，即使它随后被复位。

主机名

自动设置为当前主机的名称。

主机类型

自动设置为一个字符串，该字符串唯一地描述了执行`bash`的机器的类型。默认值取决于系统。

直线

每次引用这个参数时，shell 都会替换一个十进制数，表示脚本或函数中当前的顺序行号(从 1 开始)。当不在脚本或函数中时，不能保证被替换的值是有意义的。如果`LINENO`未置位，它将失去其特殊属性，即使它随后被复位。

公式编辑器

以标准的 GNU cpu-company-system 格式，自动设置为一个字符串，该字符串完整描述了`bash`正在其上执行的系统类型。默认值取决于系统。

老普德

由`cd`命令设置的先前工作的目录。

OPTARG(选项)

由`getopts` builtin 命令处理的最后一个选项参数的值(请参见`bash`手册页中的“Shell Builtin 命令”)。

太棒了

由`getopts`内置命令处理的下一个参数的索引(参见`bash`手册页中的“Shell 内置命令”)。

购买类型

自动设置为描述执行`bash`的操作系统的字符串。默认值取决于系统。

管道状态

一个数组变量(参见`bash`手册页中的“数组”),包含最近执行的前台管道中进程的退出状态值列表(可能只包含一个命令)。

PPID 是

shell 的父进程的进程 ID。此变量是只读的。

(美国)公共工程处(Public Works Department)

由`cd`命令设置的当前工作目录。

随意

每次引用该参数时，都会产生一个 0 到 32767 之间的随机整数。随机数序列可以通过给`RANDOM`赋值来初始化。如果`RANDOM`未置位，它将失去其特殊属性，即使它随后被复位。

回答

当没有提供参数时，设置由`read`内置命令读取的输入行。

秒

每次这个参数被引用时，返回自 shell 调用以来的秒数。如果给`SECONDS`赋值，后续引用返回的值是赋值后的秒数加上赋值后的值。如果`SECONDS`未置位，它将失去其特殊属性，即使它随后被复位。

甲壳动物

用冒号分隔的启用的 shell 选项列表。列表中的每个单词都是`set`内置命令的`-o`选项的有效参数(参见`bash`手册页中的“Shell 内置命令”)。出现在`SHELLOPTS`中的选项是由`set -o`报告的选项。如果`bash`启动时该变量在环境中，则在读取任何启动文件之前，列表中的每个 shell 选项都将被启用。此变量是只读的。

嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘嘘

每次`bash`的实例启动时增加 1。

用户界面设计（User Interface Design 的缩写）

扩展到当前用户的用户 ID，在 shell 启动时初始化。此变量是只读的。

外壳使用以下变量。在某些情况下，`bash`给一个变量赋一个默认值；这些案例将在以下章节中说明。

BASH_ENV

如果在 `bash`执行 shell 脚本时设置了该参数，其值将被解释为包含初始化 shell 命令的文件名，如`~/.bashrc`所示。在被解释为文件名之前，`BASH_ENV`的值经过参数扩展、命令替换和算术扩展。`PATH`不用于搜索结果文件名。

CDPATH(路径)

`cd`命令的搜索路径。这个是一个用冒号分隔的目录列表，shell 在其中查找由`cd`命令指定的目标目录。一个样本值是`.:~:/usr`。

列

由`select`内置命令用来确定打印选择列表时的终端宽度。这在收到`SIGWINCH`时自动设置。

理解

一个数组变量，`bash` 从中读取由可编程完成工具调用的 shell 函数生成的可能完成(参见`bash`手册页中的“可编程完成”)。

编辑器

当 shell 以值`t`开始时，如果`bash`在环境中找到这个变量，它假定 shell 正在运行在一个`emacs` shell 缓冲区中，并禁用行编辑。

mcedit

默认编辑器为 `fc`内置命令。

别理他

执行文件名补全时要忽略的以冒号分隔的后缀列表(请参见`bash`手册页中的`READLINE`)。后缀与`FIGNORE`中的条目之一匹配的文件名从匹配文件名列表中排除。样本值为`.o:~`。

全球忽略

用冒号分隔的模式列表定义了路径名扩展要忽略的文件名集合。如果与路径名扩展模式匹配的文件名也与`GLOBIGNORE`中的模式之一匹配，它将从匹配列表中删除。

列举控件

用冒号分隔的值列表，控制命令如何保存在历史列表中。如果值列表包含`ignorespace`，以空格字符开头的行不会保存在历史列表中。值`ignoredups`导致匹配先前历史条目的行不被保存。值`ignoreboth`是`ignorespace`和`ignoredups`的简写。值`erasedups`导致在保存当前行之前，匹配当前行的所有先前行从历史列表中移除。不在先前列表中的任何值都将被忽略。如果`HISTCONTROL`未设置或不包含有效值，shell 解析器读取的所有行都保存在历史列表中，取决于`HISTIGNORE`的值。不测试多行复合命令的第二行和后续行，并将其添加到历史记录中，与`HISTCONTROL`的值无关。

HISTFILE(历史文件)

保存命令历史的文件名(参见`bash`手册页中的`HISTORY`)。默认值为`~/.bash_history`。如果未设置，当交互式 shell 退出时，不保存命令历史记录。

历史文件大小

历史文件中包含的最大行数。当此变量被赋值时，历史文件将被截断，如有必要，删除最早的条目，使其包含的行数不超过该值。默认值为 500。当交互式 shell 退出时，历史文件在写入后也会被截断到这个大小。

HISTIGNORE

冒号分隔的模式列表用于决定哪些命令行应该保存在历史列表中。每个模式被锚定在该行的开头，并且必须匹配完整的行(没有附加隐含的`*`)。在应用了`HISTCONTROL`指定的检查后，对照生产线测试每个图形。除了正常的 shell 模式匹配字符外，`&`匹配以前的历史行。`&`可以用反斜杠转义；在尝试匹配之前，会删除反斜杠。不测试多行复合命令的第二行和后续行，不管`HISTIGNORE`的值是多少，都将其添加到历史记录中。

组份大小

命令历史中要记住的命令数量(参见`bash`手册页中的`HISTORY`)。默认值为 500。

历史时间格式

如果这个变量被设置并且不为空，它的值被用作格式字符串，供`strftime(3)`打印与`history`内置显示的每个历史条目相关的时间戳。如果设置了此变量，时间戳将被写入历史文件，因此可以跨 shell 会话保存时间戳。这使用历史注释字符来区分时间戳和其他历史行。

家

当前用户的主目录；`cd`内置命令的默认参数。执行波浪号展开时，也会使用此变量的值。

档案空间

包含一个文件名，其格式与 shell 需要完成主机名时应该读取的格式相同。在 shell 运行时，可能的主机名完成列表可能会改变；值更改后，下次尝试完成主机名时，`bash`会将新文件的内容添加到现有列表中。如果`HOSTFILE`被设置但没有值，`bash`试图读取`/etc/hosts`以获得可能的主机名完成列表。当`HOSTFILE`未置位时，主机名列表被清除。

可安装文件系统

内部字段分隔符，用于扩展后的单词拆分，以及使用`read`内置命令将行拆分成单词。默认值为`''''`。

无知的

控制一个交互外壳在收到一个`EOF`字符作为唯一输入时的动作。如果设置，该值是在`bash`退出之前必须作为输入行的第一个字符输入的连续`EOF`字符的数量。如果变量存在，但没有数值或没有值，则默认值为 10。如果不存在，`EOF`表示对 shell 的输入结束。

INPUTRC(输入 RC)

`readline` 启动文件的文件名，覆盖默认的`~/.inputrc`(参见`bash`手册页中的`READLINE`)。

语言

用于为任何没有使用以`LC_`开头的变量专门选择的类别确定区域设置类别。

LC_ALL

这个变量覆盖了`LANG`的值和任何其他指定地区类别的`LC_`变量。

LC _ 校对

该变量确定对路径名扩展的结果进行排序时使用的排序顺序，并确定范围表达式、等价类以及路径名扩展和模式匹配中排序序列的行为。

LC_CTYPE

该变量决定了字符的解释以及路径名扩展和模式匹配中字符类的行为。

LC _ 消息

这个变量决定了用于翻译以`$`开头的双引号字符串的语言环境。

LC _ 数字

该变量决定了用于数字格式化的区域设置类别。

线

由`select`内置命令用来确定打印选择列表的列长度。这在收到`SIGWINCH`时自动设置。

邮件

如果该参数设置为一个文件名，并且没有设置`MAILPATH`变量，`bash`通知用户指定文件中的邮件到达。

邮件检查

指定`bash` 检查邮件的频率(秒)。默认值为 60 秒。当需要检查邮件时，shell 会在显示主要提示之前进行检查。如果该变量未设置或设置为不大于或等于零的值，shell 将禁用邮件检查。

邮件路径

要检查邮件的用冒号分隔的文件名列表。邮件到达特定文件时要打印的消息可以通过用`?`将文件名与消息分开来指定。在消息文本中使用时，`$` _ 扩展为当前邮件文件的名称。这里有一个例子:

```
MAILPATH='/var/mail/bfox?"You have mail":~/shell-mail?"$_ has mail!"'
```

`Bash`为此变量提供默认值，但它使用的用户邮件文件的位置取决于系统(例如，`/var/mail/$USER`)。

奥斯特尔

如果设置为值 1，`bash` 显示由`getopts`内置命令生成的错误消息(参见`bash`手册页中的“Shell 内置命令”)。`OPTERR`在每次调用 shell 或执行 shell 脚本时初始化为 1。

小路

命令的搜索路径。它是一个用冒号分隔的目录列表，shell 在其中查找命令(参见`bash`手册页中的“命令执行”)。`PATH`值中的零长度(null)目录名表示当前目录。空目录名可能显示为两个相邻的冒号，或者显示为开头或结尾的冒号。默认路径取决于系统，由安装`bash`的管理员设置。常见的值是`/usr/gnu/bin:/usr/local/bin:/usr/ucb:/bin:/usr/bin`。

POSIXLY_CORRECT

如果这个变量在`bash`启动时处于环境中，那么 shell 在读取启动文件之前进入 POSIX 模式，就好像已经提供了`--posix`调用选项一样。如果它在 shell 运行时被设置，`bash`启用 POSIX 模式，就像命令`set -o posix`已经被执行一样。

提示命令

如果设置，该值在发出每个主要提示之前作为命令执行。

提示 _DIRTRIM

如果设置为大于零的数字，该值将用作展开`\w`和`\W`提示字符串转义时要保留的尾随目录组件的数量(请参见`bash`手册页中的“提示”)。删除的字符将替换为省略号。

PS1

该参数的值被扩展(参见`bash`手册页中的“提示”),并被用作主要提示字符串。默认值为`"\s-\v\$ "`。

PS2

该参数的值与`PS1`一样被扩展，并用作二级提示字符串。默认为`"> "`。

PS3

该参数的值用作 select 命令的提示(参见前面的“SHELL 语法”)。

PS4

该参数的值与`PS1`一样被扩展，并且该值在执行跟踪期间每个命令`bash`显示之前被打印。根据需要，`PS4`的第一个字符被重复多次，以表示多层次的间接性。默认为`"+ "`。

壳

shell 的完整路径名保存在这个环境变量中。如果在 shell 启动时没有设置，则`bash`会为其分配当前用户登录 shell 的完整路径名。

时间格式

该参数的值是用作格式字符串的,指定应该如何显示以时间保留字为前缀的管道的定时信息。`%`字符引入了一个转义序列，该序列被扩展为一个时间值或其他信息。转义序列及其含义如下:大括号表示可选部分。

*   `%%`:一个文字`%`。
*   `%[p][l]R`:经过的时间，以秒为单位。
*   `%[p][l]U`:用户模式下花费的 CPU 秒数。
*   `%[p][l]S`:系统模式下花费的 CPU 秒数。
*   `%P`:CPU 百分比，计算方式为(`%U + %S) / %R`)。可选的`p`是一个指定精度的数字，小数点后的小数位数。值 0 表示不输出小数点或分数。最多可以指定小数点后三位；大于 3 的`p`值改为 3。如果未指定`p`，则使用值 3。可选的 l 指定了一个更长的格式，包括分钟，格式为`MMmSS.FFs`。`p`的值决定了是否包含该分数。如果没有设置这个变量，`bash`的行为就好像它有值`$'\nreal\t%3lR\nuser\t%3lU\nsys%3lS'`一样。如果该值为 null，则不显示任何计时信息。当显示格式字符串时，会添加一个尾随换行符。

TMOUT(数字量输出)

如果设置为大于零的值， `TMOUT`被视为读取内置的默认超时。当输入来自终端时，如果在`TMOUT`秒后输入没有到达，选择命令终止。在交互式 shell 中，该值被解释为发出主要提示后等待输入的秒数。`Bash`如果输入没有到达，等待该秒数后终止。

设置临时文件夹

如果设置了，`bash`使用它的值作为目录的名称，在这个目录中`bash`创建临时文件供 shell 使用。

自动恢复

该变量控制 shell 如何与用户和作业控制交互。如果设置了此变量，没有重定向的单个单词简单命令将被视为恢复现有已停止作业的候选命令。不允许有任何歧义；如果有多个以键入的字符串开头的作业，则选择最近访问的作业。在此上下文中，已停止作业的名称是用于启动它的命令行。如果设置为值 exact，则提供的字符串必须与停止的作业的名称完全匹配。如果设置为 substring，则提供的字符串需要与已停止作业的名称的子字符串匹配。子字符串值提供类似于`%?`作业标识符的功能(参见`bash`手册页中的“作业控制”)。如果设置为任何其他值，则提供的字符串必须是已停止作业名称的前缀。这提供了类似于`%string`工作标识符的功能。

历史人物

控制历史扩展和标记化的两三个字符(参见`bash`手册页中的“历史扩展”)。第一个字符是历史扩展字符，该字符表示历史扩展的开始，通常为`!`。第二个字符是快速替换字符，用作重新运行之前输入的命令的简写，用命令中的一个字符串替换另一个字符串。默认是`^`。可选的第三个字符是当作为单词的第一个字符时，指示该行的剩余部分是注释的字符，通常是`#`。历史注释字符导致跳过对该行中剩余单词的历史替换。这并不一定会导致 shell 解析器将该行的其余部分视为注释。