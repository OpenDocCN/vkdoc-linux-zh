# 二十二、跟随你的好奇心

人们谈论终生学习，以及这如何使人保持头脑清醒和年轻。系统管理员也是如此。总是有更多的东西需要学习，我认为这是让我们大多数人保持快乐并随时准备解决下一个问题的原因。持续的学习有助于保持我们的思维和技能敏锐，不管我们的年龄有多大。

我喜欢学习新东西。我很幸运，因为我的好奇心让我一生都在和我最喜欢的玩具——电脑打交道。关于计算机，当然还有很多新的东西要学；行业和技术都在不断变化。地球上和这个宇宙中有许多事情值得好奇。计算机和相关技术似乎是我最喜欢的东西。

我也假设你一定很好奇，因为你正在读这本书。但不是每个人都像我们一样好奇。

## 傻瓜

让我们乘坐我的时光倒流机到俄亥俄州托莱多的 1970 年旅行。我当时在一家化工厂做一份非常无聊的测试工作，和其他七八个人一起。我们会采用化学家们想出来的化学配方，将它们混合到乙烯树脂中，然后将其压制成各种类型的织物，用于汽车行业的座椅和乙烯树脂车顶。我们的工作是测试由此产生的原始乙烯基和涂层织物，看看它们是否符合订购它们的汽车公司提供的所有规格。

从没见过汽车上的乙烯基车顶？是啊，很久以前了！

我的一个同事查理是一个消极的人。他不停地抱怨。他会抱怨工作条件——我们周围有很多挥发性化学物质，如果你想要的话，很容易兴奋并停留在那里，但这也很危险。他抱怨这份工作有多危险，有多无聊，但我们都做了一些，这是那种工作的一部分。但是查理从他走进来的那一刻起，一直抱怨到下午比赛结束的哨声响起。

有一天，我们进行了一次谈话，大概是这样的。

一天早上八点半左右，查理对我说:“我讨厌这份工作。退出时间不能足够快地到达这里。”

我已经受够了他的消极，所以我说，“查理，如果你这么讨厌这份工作，为什么不另找一份工作呢？”

“我不知道还能做什么。”

所以我说，“那你为什么不学点新东西呢？下学期我将回到大学，拿到学位后我不会在这里呆太久。我打算找一份更好的工作。”

“这对你来说很容易，你还年轻。我老了，你不能教老狗新把戏。”

我问他:“你多大了，查理？”

“三十六岁，”他说。

即使在那时，我二十出头，在我自己的心目中似乎无懈可击，不朽，我知道三十六岁并不老。就在那时，我对自己发誓，我永远不会停止学习——我每天都要学习新的东西。我遵守了那个誓言。当然，在过去四十年的大部分时间里，我的职业和业余爱好都是计算机，所以这个誓言很容易遵守。

## 好奇心让我选择了 Linux

好奇心首先让我进入了 Linux，但这是一条漫长而曲折的道路。如果你愿意，你可以跳过这一长段，也许对你来说，这一段很无聊。我确实发现，描述我的旅程如何把我带到今天的位置，对一些人来说很有趣，也很有帮助。它确实表明，生活中两点之间的最短距离通常不是一条直线。在任何情况下，我都会尽可能地保持简短，并展示好奇心对我生活的影响。

从我学校成绩的标准意义上来说，我从来都不是一个特别好的学生。我倾向于跟随我的好奇心，而不是课程计划。大多数老师不喜欢这样。我对电学、电子学、数学和化学感兴趣。我很幸运有好的化学和数学老师，但在 1960 年，除非我去托莱多的职业技术高中，否则没有高中的电子学课程。我想去那里，但我的父母说服我，我可以以后学习电子学。

在我十几岁的时候，我对电子学的兴趣受到了我的 HO 轨距模型铁路的帮助和鼓励，它要求我至少学习电学的基础知识。所以我从图书馆借书来学习。我还在托莱多大学(UT)书店找到了我购买并学习的大学水平的练习册。我给我的模型铁路布线，当我学到新的东西时，我完全撕掉现有的布线，从头开始重新布线。

我们的电视坏了的时候，我也经常修理它。最终，邻居开始要求我在他们的电视和收音机坏了的时候帮他们修理。那时候这很容易，因为每个电子设备都有一个原理图，我所要做的就是找出要更换哪个真空管。有一些书用图片展示了各种症状，然后列出了失效时会导致这些问题的管子类型，这很有帮助。几乎每家药店和杂货店都有试管测试器和试管供应，这也很有帮助。这意味着我可以移除我怀疑是故障原因的一根或多根管子，然后走到一个地方进行测试并购买一个替代品。

1968 年夏天，我在洛杉矶的一个姑姑家度过。我的叔叔在航空航天行业担任计算机程序员，我在他们的车库里发现了一堆旧的自学手册。我没有像我计划的那样一直去海滩，而是在暑假的大部分时间里从那些旧课程中学习 IBM 大型机计算。

然后在 1968 年末，我在一份涉及大量数字运算的工作中，我们使用非常古老的机械计算器，做一次乘法需要几分钟。我建议我们买一台四功能电子计算器，当时这种计算器刚开始上市。我的主管认为这是个好主意，所以他让我研究一下这种可能性。我们联系的两个供应商有这些有趣的新设备，桌面可编程计算器。双方都愿意让我使用演示模型，这样我就可以在我们自己的环境中用我知道我们将要解决的问题来测试它们。

我能够说服财务人员，这台 3500 美元的计算器物有所值，所以我们购买了一台 Olivetti Programma 101。我花了几个月的时间编写这个程序，并想学习更多关于编程的知识。

我很快发现大学只开设了一门编程课程，所以我选了一门基础课程。这个班是托莱多大学在阿格分时系统上教的，大概是阿格-600<sup>[2](#Fn2)系列，位于俄亥俄州哥伦布市。终端访问是通过 ASR 33 电传打字机在 300 波特的拨号电话线上进行的。</sup>

然后，我从使用 P-101 的工作岗位晋升到 IBM 1401 的夜班操作员，在那里我第一次直接接触到了大型计算机。这份工作我干了几个月才继续。

我是 1969 年初结婚的。虽然这还没有对我的职业道路产生直接影响，但它在以后将是至关重要的。

在我的下一份工作中，我没有直接接触电脑，但我也在晚上为一个乐队工作，担任他们的音响技术员和唯一的乐队指挥。乐队的鼓手有一个电子邮件课程，他已经支付了费用，但没有时间参加，所以他向我提供了这个课程。我抓住了这个机会，电子知识让我在托莱多的一家音响销售和维修店找到了工作，在那里我学到了更多。

那是在 1972 年左右，我和妻子从我岳父那里买下了以前的出租屋。原来我们的一个邻居在 IBM 工作。他问我是否有兴趣在 IBM 工作，但我对现在的工作很满意，所以我说我不感兴趣。

音频维修工作让我找到了另一份工作，成为一家新音响商店的服务经理，在那里我还花了一些时间学习电子工程课程。我擅长这些课程，因为我喜欢电子学。

当我被新的音响商店解雇时，我问我的 IBM 朋友他们是否还在招人。他给我安排了一次面试，我开始了在 IBM 的 21 年职业生涯。我在 IBM 的第一份工作是在通用系统部(GSD)做客户工程师，修理硬件。1978 年，IBM 把我调到他们在佛罗里达州博卡拉顿的工厂工作，为新产品编写培训课程。1981 年初，我被指派为最初的 IBM 个人电脑编写培训材料。 <sup>[3](#Fn3)</sup>

为了编写个人电脑的培训课程，我需要在我的办公室里放一个，这样我就可以方便地自己学习了。因为当时非常秘密，安保人员在我办公室的天花板上安装了铁丝网，门上也装了锁。我是大楼里唯一一个办公室门上有锁的非经理人员。我猜头顶上的铁丝网是为了防止一些邪恶的小偷爬过我办公室的墙，掉进里面。只有在那之后，我才能在办公室里拥有一台电脑。我的序列号是 00000001。

在编写培训课程时，我最初采用了一种更传统的 IBM 培训策略，但这并不适用于打字机部门的 CEs，他们的工资比我们在 GSD 时要低。使用打字机部门的 CEs 使其更具成本效益，但这意味着我们必须让这些 CEs 熟悉计算机概念和技术。我必须确保他们在培训期间亲自动手，但让他们去培训中心太贵了。

所以我完全重写了培训。我编写了一个完整的计算机化培训程序，它允许我编写课程内容，然后在我们运送到分公司进行培训的 IBM 个人电脑上将其提交给当地分公司的 CEs。然后我写了课程本身。尽管这绝对不是第一个计算机化的培训课程，但它是第一个用于 IBM PC 的培训软件和课件。

为了编写这份修改后的课程并保持我们的时间表与电脑发布日期一致，我要求允许我在家里拥有一台电脑，这样我就可以更容易地在晚上上课。经过几十个高层主管的签字同意后，除了我在办公室的那台电脑外，我还得到了一台可以带回家的电脑。据我所知，我是第一个在家里拥有 IBM 个人电脑的人。

当然，所有这些都让我对个人电脑产生了浓厚的兴趣。所以我通过员工购买计划给自己买了一个。扣除员工折扣后，这花费了 5000 多美元。该系统包括一对 160KB 的 5.25 英寸软驱，没有硬盘和 64K 的 RAM。当我们办公室的几个人一起去购买我们必须自己制作的第三方存储卡的零件时，我开始入侵 PC 硬件。

在经历了几次职业变动后，我在佐治亚州亚特兰大的 IBM PC 帮助中心找到了一份工作。那段时间我对操作系统非常感兴趣，并最终成为 OS/2 的主要支持人员之一。

在 1993 年搬到北卡罗来纳州的罗利后，我于 1995 年离开 IBM，创办了一家专门从事 OS/2 的咨询公司。到 1996 年，很明显 OS/2 不会存在太久。我被学习 Windows NT 的想法吓坏了。尽管我还没有听说过 Linux，但我认为我的未来在 Unix。

大约在这个时候，IBM 的一个朋友有一天打电话给我，问我是否知道有人在找工作，可以帮助 MCI(他现在在那里工作)使用他们的 OS/2 计算机。我接受了这份工作，条件是我必须学习 Unix。

在 MCI 的时候，我能够学习一些基本的 Unix 课程，这使我开始起步。我还听说了一个叫 Linux 的东西，它很像 Unix，我可以把它安装在我的个人电脑上。我认为我需要提高我的 Unix/Solaris 技能，但是我负担不起为家里购买一台 Sun 计算机和 Solaris。所以我在当地的电脑商店买了一份红帽 5.0(不是 RHEL)并安装在我的几台电脑中的一台上。我喜欢 Linux，在了解了更多之后，我发现我没有进步。我决定进行一次飞跃，除了一台之外，我把家里所有的电脑都升级到了 Linux。最后一步是将我的 web 和电子邮件服务器从 OS/2 迁移到 Linux。

所有这些学习的结果是，我能够在当地的 ISP 找到一份 Unix 工程师的工作。他们送我去上 Solaris 课程，我获得了 Sun 认证的系统管理员证书。在这里，我遇到了一些最好的导师。

我们中大约有 80 人被 ISP 解雇，我很快找到了一份承包商的工作。这是我负责修复运行在 Red Hat Linux 服务器上的所有 Perl 脚本的地方。我们还使用了一些需要清理的 bash shell 脚本。在那份工作中，我学到了更多关于 Linux 和 shell 脚本的知识。

这导致了一系列围绕 Linux 的工作，在大多数工作中，我至少接受了一些 Linux 培训。我发现我工作过的大多数地方都需要有人在 Linux 的各个方面培训其他管理员和用户。我组织了几个 Linux 课程和午餐学习会议，都很受欢迎。

我发现当我教别人的时候，无论是在课堂环境中还是在书籍和文章中，我自己学到的东西最多。我必须仔细研究事情，以确保我做对了。我还必须回答学生们提出的问题，这些问题是我在创作材料时从未考虑过的。我必须研究我没有答案的问题。

现在我在写关于 Linux 的文章，这需要更多的研究、测试和实验。

这只是我个人通向 Linux 和开源之路的一部分。有很多附带的旅行影响了我的一些决定，并改变了我生活中某些事件的时间，这样事情就为上面的故事展开做好了准备。

在我成长或上学的时候，找一份 Linux 方面的工作并不是我所能计划的，因为在我高中和大学的最初几年，Unix、Linux 和开源都不存在。我所做的选择，我遇到的人，我获得的知识，我住过的地方，我做过的一系列工作，都导致了我现在的地位，因为我一次又一次地选择追随我喜欢的和我有强烈好奇心的东西，技术，计算机，操作系统和 Linux。我的选择，不管是有意识的还是无意识的，带我走上了一条被好奇心驱使的道路。从很多方面来说，这都是令人愉快和有益的。

如果你有兴趣阅读一些其他人进入 Linux 和开源领域的故事，可以看看 Opensource.com 网站上标有“职业” <sup>[4](#Fn4)</sup> 的文章列表。他们经常发表一些故事，讲述那些找到不同方法来到这里的人。并非列表中的所有文章都是关于“我如何在开源领域找到工作”的，但有些是。你可能会发现这些和其他带有这个标签的文章很有趣。

## 好奇心解决问题

有一句老话——我认为非常愚蠢——说“好奇害死猫”我小时候用过这个，幸运的是我父母没有用过。我认为这个愚蠢的说法主要是用来扼杀孩子，当他们的问题和好奇心把他们带到一些父母、老师和照顾者不愿花时间处理的地方时。这是我们周围建造盒子的方式之一。

我个人的说法是“好奇心解决问题。”跟随我们的好奇心会把我们带到盒子外面的地方，让我们用其他方式无法解决问题的地方。有时好奇心可以直接引导我找到问题的原因，而其他时候这种联系是间接的。

### 安全性

好奇心让我解决了许多问题，其中一些我最初甚至不知道存在。在这种情况下，计算机仍在运行，没有明显的症状，如崩溃或程序失败。没有明显的问题，一切似乎都很好。安全问题可以是这样的。

这一特殊的经历始于多年前的一天，当时我决定检查我的系统的安全性，尤其是我和外界之间的防火墙。我已经在防火墙上设置了一些防火墙规则和强密码。但是我很好奇我的安全状况，以及是否有一些我可以关闭的漏洞。我不是说代码漏洞，我是说程序和安全配置漏洞，那些我可以比当时做得更好的东西。一切都是从日志开始的。

当一切正常时，我喜欢观察 top、htop、iotop、glances 或任何其他系统监控工具，这样当它们看起来不一样时，我就知道可能有问题。我对我的日志文件也是这样。所以我花了大量时间扫描我的日志文件，看是否能发现任何异常。这总是一件非常耗时的工作，每天试图解释数百甚至数千行日志文件实在是太多了，而且很难将数据归结为可管理的东西。我需要找到一种方法来自动化这项任务，如果有潜在的问题，它会提醒我——是的，自动化一切。

#### 日志监控

我读过 Logwatch，它就是这样做的，所以我花了一些时间研究它和其他可能对我有用的类似工具。每天，Logwatch 都会扫描前一天的日志文件，以查找 SysAdmin 应该看到的异常条目，从而确定是否存在问题。它非常适合我的需要。

我想我在用作防火墙的 Fedora 主机上安装了 Logwatch，因为它不是默认安装的。这是一段很长的时间，所以我不记得了，我的 postinstall.sh 脚本现在安装`logwatch`，如果它还没有安装的话。在 Fedora workstation 的当前版本中，Logwatch 肯定不是默认安装的。

Logwatch 通常由/etc/cron.daily 中的 cron 作业`0logwatch`运行，0logwatch 脚本配置为将结果作为电子邮件发送给 root 用户。我不想让 Logwatch 的输出进入 root，所以我在防火墙主机上的/etc/aliases 文件中添加了一行，并重新启动 sendmail。现在电子邮件会发给我。

`logwatch`程序也可以直接从命令行运行。在这种情况下，默认情况下将输出发送到 STDOUT，所以我没有等到第二天再查看 cron 作业发送给我的内容，而是从命令行运行了`logwatch`。

实验 22-1 安装 Logwatch，然后让你从命令行运行它。我在我的防火墙上做了这个，有大量的数据。我已经删除了一些部分的大部分，只留下足够你看的部分

### 实验 22-1

这个实验必须以 root 用户身份进行。我们将首先安装 Logwatch，然后从命令行运行它。

```sh
[root@wally1 ~]# dnf -y install logwatch
Last metadata expiration check: 2:59:04 ago on Sat 07 Apr 2018 05:11:02 AM EDT.
Dependencies resolved.
======================================================================
 Package              Arch       Version             Repository  Size
======================================================================
Installing:
 logwatch             noarch     7.4.3-6.fc27        fedora     423 k
Installing dependencies:
 perl-Date-Manip      noarch     6.60-1.fc27         fedora     1.1 M
 perl-Sys-CPU         x86_64     0.61-13.fc27        fedora      19 k
 perl-Sys-MemInfo     x86_64     0.99-5.fc27         fedora      25 k

Transaction Summary
======================================================================
Install  4 Packages

Total download size: 1.6 M
Installed size: 12 M
Downloading Packages:
(1/4): perl-Sys-CPU-0.61-13.fc27.x86_  49 kB/s |  19 kB     00:00    
(2/4): perl-Sys-MemInfo-0.99-5.fc27.x 458 kB/s |  25 kB     00:00    
(3/4): logwatch-7.4.3-6.fc27.noarch.r 776 kB/s | 423 kB     00:00    
(4/4): perl-Date-Manip-6.60-1.fc27.no 1.8 MB/s | 1.1 MB     00:00    
----------------------------------------------------------------------
Total                                 1.8 MB/s | 1.6 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                              1/1
  Installing       : perl-Sys-MemInfo-0.99-5.fc27.x86_64          1/4
  Installing       : perl-Sys-CPU-0.61-13.fc27.x86_64             2/4
  Installing       : perl-Date-Manip-6.60-1.fc27.noarch           3/4
  Installing       : logwatch-7.4.3-6.fc27.noarch                 4/4
  Running scriptlet: logwatch-7.4.3-6.fc27.noarch                 4/4
  Running as unit:   run-r859e9a9c34c64b2280025d5d33b5a7ac.service
  Verifying        : logwatch-7.4.3-6.fc27.noarch                 1/4
  Verifying        : perl-Date-Manip-6.60-1.fc27.noarch           2/4
  Verifying        : perl-Sys-CPU-0.61-13.fc27.x86_64             3/4
  Verifying        : perl-Sys-MemInfo-0.99-5.fc27.x86_64          4/4

Installed:
  logwatch.noarch 7.4.3-6.fc27                                        
  perl-Date-Manip.noarch 6.60-1.fc27                                  
  perl-Sys-CPU.x86_64 0.61-13.fc27                                    
  perl-Sys-MemInfo.x86_64 0.99-5.fc27                                 

Complete!

```

安装完成后，我们运行不带选项的 logwatch 命令。为了节省空间，我在某些部分删掉了大量的行。我还在输出中插入了注释，以便在某种程度上描述结果。您的结果将与我的不同，但这将让您很好地理解为什么我让我的好奇心带我到安全的其他方面。

```sh
[root@testvm1 ~]# logwatch

 ################### Logwatch 7.4.3 (04/27/16) ####################
        Processing Initiated: Fri Apr  6 14:01:32 2018
        Date Range Processed: yesterday
                              ( 2018-Apr-05 )
                              Period is day.
        Detail Level of Output: 10
        Type of Output/Format: stdout / text
        Logfiles for Host: wally1.both.org
 ##################################################################

```

前一部分是描述运行命令的条件、日期和时间的标题。下一节包含内核信息，主要是各种服务的开始和停止条目，以及登录。请注意，Logwatch 已经将这一部分从 10，000 多行删减到只有 100 行。我把它砍得更低了。

```sh
 --------------------- Kernel Audit Begin ------------------------

 **Unmatched Entries** (Only first 100 out of 10226 are printed)
  audit[1]: SERVICE_START pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=mlocate-updatedb comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'
  audit[1]: SERVICE_START pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=sysstat-collect comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'
  audit[1]: SERVICE_STOP pid=1 uid=0 auid=4294967295 ses=4294967295 msg='unit=sysstat-collect comm="systemd" exe="/usr/lib/systemd/systemd" hostname=? addr=? terminal=? res=success'

<SNIP>

```

接下来的几个条目是一些成功登录的结果。

```sh
  audit[16590]: CRYPTO_KEY_USER pid=16590 uid=0 auid=4294967295 ses=4294967295 msg='op=destroy kind=server fp=SHA256:e9:53:4c:65:7f:a4:cb:6d:42:0c:40:a3:a4:a2:a9:d3:05:dd:4f:41:3b:26:ed:f6:02:ec:2b:4f:f9:a2:9d:5c direction=? spid=16590 suid=0  exe="/usr/sbin/sshd" hostname=? addr=? terminal=? res=success'
  audit[16590]: CRYPTO_KEY_USER pid=16590 uid=0 auid=4294967295 ses=4294967295 msg='op=destroy kind=server fp=SHA256:2d:39:44:81:f6:e0:47:1f:f3:b1:02:a1:76:73:2e:16:26:6f:d8:e5:7d:2a:4a:ab:76:17:dd:36:54:b1:e6:a5 direction=? spid=16590 suid=0  exe="/usr/sbin/sshd" hostname=? addr=? terminal=? res=success'
  audit[16590]: CRYPTO_KEY_USER pid=16590 uid=0 auid=4294967295 ses=4294967295 msg='op=destroy kind=server fp=SHA256:c4:2a:24:f1:0b:14:d4:4e:eb:33:6b:90:e0:84:c5:64:72:ec:30:72:3c:84:28:72:88:14:e3:1a:9d:d7:de:a9 direction=? spid=16590 suid=0  exe="/usr/sbin/sshd" hostname=? addr=? terminal=? res=success'
  audit[16589]: CRYPTO_SESSION pid=16589 uid=0 auid=4294967295 ses=4294967295 msg='op=start direction=from-server cipher=aes128-ctr ksize=128 mac=hmac-sha2-256 pfs=diffie-hellman-group-exchange-sha256 spid=16590 suid=74 rport=54280 laddr=24.199.159.59 lport=22  exe="/usr/sbin/sshd" hostname=? addr=109.228.0.237 terminal=? res=success'
  audit[16589]: CRYPTO_SESSION pid=16589 uid=0 auid=4294967295 ses=4294967295 msg='op=start direction=from-client cipher=aes128-ctr ksize=128 mac=hmac-sha2-256 pfs=diffie-hellman-group-exchange-sha256 spid=16590 suid=74 rport=54280 laddr=24.199.159.59 lport=22  exe="/usr/sbin/sshd" hostname=? addr=109.228.0.237 terminal=? res=success'

<SNIP>

```

接下来的几行只是大量登录失败中的两个。这是我第一次看到大量攻击的迹象。仅仅通过视觉扫描很难找到这些，所以我使用 grep 实用程序来找到更多。这种方法并没有给出问题有多糟糕的真实感觉，但是后面的其他部分给出了这种感觉。

```sh
  audit[16589]: USER_LOGIN pid=16589 uid=0 auid=4294967295 ses=4294967295 msg='op=login acct="(unknown)" exe="/usr/sbin/sshd" hostname=? addr=109.228.0.237 terminal=ssh res=failed'
  audit[16596]: CRYPTO_KEY_USER pid=16596 uid=0 auid=4294967295 ses=4294967295 msg='op=destroy kind=session fp=? direction=both spid=16597 suid=74 rport=41125 laddr=24.199.159.59 lport=22  exe="/usr/sbin/sshd" hostname=? addr=221.194.47.243 terminal=? res=success'
  audit[16596]: USER_LOGIN pid=16596 uid=0 auid=4294967295 ses=4294967295 msg='op=login acct="(unknown)" exe="/usr/sbin/sshd" hostname=? addr=221.194.47.243 terminal=ssh res=failed'

<SNIP>

 ---------------------- Kernel Audit End -------------------------

```

cron 部分显示每个 cron 作业在过去 24 小时内运行的次数。

```sh
 --------------------- Cron Begin ------------------------

 Commands Run:
    User root:
       /sbin/hwclock --systohc --localtime: 1 Time(s)
       run-parts /etc/cron.hourly: 24 Time(s)
       systemctl try-restart atop: 1 Time(s)

 ---------------------- Cron End -------------------------

```

下一节列出了大量的身份验证失败。它以一种明确的方式说明了未经授权的访问尝试的问题有多严重。它通过按尝试次数的顺序列出入侵尝试所源自的 IP 地址来做到这一点。

```sh
 --------------------- pam_unix Begin ------------------------

 sshd:
    Authentication Failures:
       root (123.183.209.135): 21 Time(s)
       unknown (14.37.169.239): 10 Time(s)
       unknown (85.145.209.59): 10 Time(s)
       unknown (116.196.115.44): 8 Time(s)
       unknown (212.129.36.144): 6 Time(s)
       unknown (84.200.7.63): 5 Time(s)
       root (218.65.30.25): 3 Time(s)
       root (84.200.7.63): 3 Time(s)
       unknown (103.99.0.54): 2 Time(s)
       unknown (196.216.8.110): 2 Time(s)
       ftp (116.196.72.140): 1 Time(s)
       ftp (118.36.193.215): 1 Time(s)
       operator (5.101.40.81): 1 Time(s)
       root (103.26.14.92): 1 Time(s)
       root (103.89.88.220): 1 Time(s)
       root (103.92.104.175): 1 Time(s)
       root (103.99.2.143): 1 Time(s)
       root (118.24.28.246): 1 Time(s)

<SNIP>

       unknown (91.121.77.149): 1 Time(s)
       unknown (95.38.15.86): 1 Time(s)
    Invalid Users:
       Unknown Account: 163 Time(s)
    Sessions Opened:
       root: 2 Time(s)

 systemd-user:
    Unknown Entries:
       session opened for user root by (uid=0): 3 Time(s)

 ---------------------- pam_unix End -------------------------

```

上面的“无效用户”行显示，在前一天，总共有 163 次尝试侵入我的防火墙主机系统。PAM 负责整体登录安全性，上一节从 PAM 的角度来看登录。下面的 SSHD 部分也是如此。这是几乎相同的信息，但呈现方式略有不同。

在这两个部分，我可以看到针对我的系统的 SSH 攻击的完整列表，这让我很好奇它们的来源以及如何防止它们。

```sh
 --------------------- SSHD Begin ------------------------

 Didn't receive an ident from these IPs:
    103.79.143.56 port 58313: 1 Time(s)
    103.79.143.56 port 61578: 1 Time(s)
    103.89.88.181 port 53906: 1 Time(s)
    103.89.88.181 port 57332: 1 Time(s)
    103.89.88.181 port 58951: 1 Time(s)

<SNIP>

    202.151.175.6 port 39552: 1 Time(s)
    217.61.5.246 port 44974: 1 Time(s)
    66.70.177.18 port 33668: 1 Time(s)
    87.98.251.208 port 56975: 1 Time(s)

 Failed logins from:
    5.101.40.81: 1 time
       operator/password: 1 time
    18.188.155.82 (ec2-18-188-155-82.us-east-2.compute.amazonaws.com): 2 times
       root/password: 2 times
    23.97.75.224: 1 time
       root/password: 1 time
    46.105.20.171 (vps16696.ovh.net): 1 time
       root/password: 1 time
    54.37.139.198 (198.ip-54-37-139.eu): 1 time
       root/password: 1 time

<SNIP>

    221.229.166.102: 1 time
       wp-user: 1 time

 Users logging in through sshd:
    root:
       192.168.0.1 (david.both.org): 2 times

 **Unmatched Entries**
 Disconnected from invalid user test 36.77.124.2 port 48914 [preauth] : 1 time(s)
 Disconnected from invalid user ubnt 103.99.2.143 port 55522 [preauth] : 1 time(s)
 Disconnected from authenticating user root 123.183.209.135 port 58498 [preauth] : 1 time(s)
 Disconnected from invalid user ftpuser 36.36.201.21 port 46357 [preauth] : 1 time(s)

<SNIP>

 Disconnected from invalid user avis 201.155.194.157 port 52769 [preauth] : 1 time(s)
 Disconnected from authenticating user root 23.97.75.224 port 1984 [preauth] : 1 time(s)
 Disconnected from authenticating user root 64.41.86.128 port 58134 [preauth] : 1 time(s)
 Disconnected from invalid user sybase 188.187.55.243 port 36344 [preauth] : 1 time(s)
 Disconnected from invalid user cron 221.145.180.62 port 37912 [preauth] : 1 time(s)

 ---------------------- SSHD End -------------------------

```

这些部分的其余部分是不言自明的，与安全性没有直接关系。因此，我没有对这个输出添加任何进一步的注释。我保留了这些部分，以便您可以看到 Logwatch 可能从典型防火墙的日志中创建的许多部分。

```sh
 --------------------- Systemd Begin ------------------------

 Reached target Shutdown: 3 Time(s)

 Started:
     Cleanup of Temporary Directories: 1 Time(s)
     Generate a daily summary of process accounting: 1 Time(s)
     LVM2 metadata daemon: 1 Time(s)
     Network Manager Script Dispatcher Service: 103 Time(s)
     Update a database for mlocate: 1 Time(s)
     User Manager for UID 0: 3 Time(s)
     dnf makecache: 23 Time(s)
     system activity accounting tool: 144 Time(s)
     update of the root trust anchor for DNSSEC validation in unbound: 1 Time(s)

 User Sessions:
     root:  66 68 70

 Slices created:
     User Slice of root 3 Time(s)

 **Unmatched Entries**
    Closed D-Bus User Message Bus Socket.: 3 Time(s)

 ---------------------- Systemd End -------------------------

 --------------------- Disk Space Begin ------------------------

 Filesystem                      Size  Used Avail Use% Mounted on
 devtmpfs                        3.9G     0  3.9G   0% /dev
 /dev/mapper/fedora_wally1-root  9.8G  173M  9.1G   2% /
 /dev/mapper/fedora_wally1-usr    35G  5.3G   28G  17% /usr
 /dev/mapper/fedora_wally1-home  4.9G  262M  4.4G   6% /home
 /dev/mapper/fedora_wally1-tmp    25G   45M   24G   1% /tmp
 /dev/mapper/fedora_wally1-var    30G  6.2G   22G  23% /var
 /dev/sda1                       2.0G  399M  1.5G  22% /boot

 ---------------------- Disk Space End -------------------------

 --------------------- lm_sensors output Begin ------------------------

 coretemp-isa-0000
 Adapter: ISA adapter
 Package id 0:  +82.0 C  (high = +85.0 C, crit = +105.0 C)
 Core 0:        +79.0 C  (high = +85.0 C, crit = +105.0 C)
 Core 1:        +83.0 C  (high = +85.0 C, crit = +105.0 C)
 Core 2:        +80.0 C  (high = +85.0 C, crit = +105.0 C)
 Core 3:        +80.0 C  (high = +85.0 C, crit = +105.0 C)

 ---------------------- lm_sensors output End -------------------------

 ###################### Logwatch End #########################

```

Logwatch 从日志中提取大量关于 Linux 主机的有用信息。它将系统管理员需要查看的信息量从数万行减少到仅仅几千行。好的方面是它聚集了相关的日志条目，所以它们都在最终报告中的一个地方，这使得扫描更加容易。

对日志观察结果的一些快速分析表明，绝大多数攻击是脚本小子。这些是使用简单脚本的自动攻击，通过简单地尝试登录一系列 IP 地址来定位开放的 SSHD 端口。一旦找到一个开放 SSHD 端口的 IP，脚本可能会花几分钟时间尝试使用随机但已知的用户 id 和基于字典的密码登录。目的是如果他们可以获得访问权，用一些恶意软件感染计算机。

脚本小子对破解受到良好保护的主机不是特别认真。他们在寻找容易得手的机会——管理不善、保护不力或根本没有保护的主机。严重的黑客，那些针对特定的人或企业，完全是另一回事。一个足够认真的黑客最终会找到进入你电脑的方法。

在我的情况下，这些不是严重的饼干。日志观察结果显示，我的防火墙每天被攻击数百次，有时甚至数千次。这些攻击是随机的，而且从来没有持续过。但是我仍然需要减少攻击次数来提高我的安全性。随着时间的推移，我使用了多种策略来做到这一点。每走一步，我的好奇心都被新的信息、对问题的新观点，或者仅仅是好奇心本身所点燃。

#### 防火墙

为了阻止这种攻击，我首先求助于 iptables 防火墙，因为我对它已经很熟悉了。几个星期以来，我花了大量时间将最恶劣的罪犯的 IP 地址添加到我的 iptables 防火墙中。

出于好奇，我想确定源 IP 地址来自世界的哪个地方。所以我开始用`whois`来确定。如果地址来自某个我知道永远都不需要自己登录的地方，我就简单地屏蔽掉整个地址范围。

这很容易做到，但它确实阻止了一些想看我网站的人。当阻止整个 A 类 IP 地址时，这种方法是多余的，但手动添加单个地址会花费大量时间。因此，出于懒惰的管理员的真实态度，以及“自动化一切”，我对自动向我的防火墙规则添加 IP 地址感到好奇。

#### 失败 2 班

经过一番探索和研究，我找到了 fail2ban，这是一款开源软件，可以自动完成我以前手动完成的工作。"使用开源软件."

Fail2ban 有一系列复杂的可配置匹配规则和单独的操作，当试图侵入系统时可以采取这些操作。它针对许多类型的攻击制定了规则，包括 web、电子邮件和许多其他可能存在漏洞的服务。Fail2ban 的工作原理是检测攻击，然后向防火墙添加一条规则，在指定和可配置的时间内阻止来自该特定单个 IP 地址的进一步尝试。时间到期后，它会删除阻止规则。

当 IP 地址被阻止时，fail2ban 用来通知系统管理员的方法之一是发送电子邮件。默认情况下，电子邮件发送给 root 用户，但也可以进行配置。我没有配置许多不同的工具来发送电子邮件到我的个人地址，而是允许它们发送到 root 和/etc/aliases 文件(我已经配置好了),将所有电子邮件重新路由到 root 以发送给我。

出于好奇，我花了一些时间来调整规则，因为 Fail2ban 将在指定时间内进行指定次数的破解尝试后阻止一个 IP 地址。我发现——就我的环境和需求而言——在十分钟内尝试三次完全符合我的要求。我还发现，封锁一个 IP 地址至少 24 小时，而不是默认的 10 分钟，确实有助于阻止惯犯。因此，下面的示例清单 [22-1](#FPar2) 中的结果是基于那些过滤规则的。

### 示例清单 22-1

在安装了 fail2ban 并根据我的需要配置它几天后，我再次运行 logwatch，`fail2ban`部分如下所示。

```sh
 --------------------- fail2ban-messages Begin ------------------------------

 Banned services with Fail2Ban:                             Bans:Unbans
    my-sshd:                                                [ 35:35 ]
       123.183.209.135                                        17:17
       84.200.7.63                                             4:4  
       212.129.36.144 (212-129-36-144.rev.poneytelecom.eu)     3:3  
       218.65.30.25 (25.30.65.218.broad.xy.jx.dynamic.         3:3  163data.com.cn)
       18.188.155.82 (ec2-18-188-155-82.us-east-2.compute.     1:1  amazonaws.com)
       66.70.177.18 (ns545339.ip-66-70-177.net)                1:1  

<SNIP>
       183.230.146.26                                          1:1  

 Fail2Ban hosts found:
     my-sshd:
        103.20.149.252 - 2018-04-05 11:01:55 (1 Times)
        103.20.149.252 - 2018-04-05 11:01:57 (1 Times)
        103.26.14.92 - 2018-04-05 07:43:26 (1 Times)
        103.26.14.92 - 2018-04-05 07:43:28 (1 Times)
        103.28.219.152 - 2018-04-05 05:17:57 (1 Times)
        103.28.219.152 - 2018-04-05 05:18:00 (1 Times)
        103.89.88.220 - 2018-04-05 11:57:17 (1 Times)
        103.89.88.220 - 2018-04-05 11:57:19 (1 Times)
        103.92.104.175 - 2018-04-05 02:23:13 (1 Times)
        103.92.104.175 - 2018-04-05 02:23:14 (1 Times)
        103.99.0.32 - 2018-04-05 16:15:59 (1 Times)
        103.99.0.32 - 2018-04-05 16:16:01 (1 Times)
        103.99.0.54 - 2018-04-05 04:17:38 (1 Times)

<SNIP>
        88.87.202.71 - 2018-04-05 01:31:22 (1 Times)
        90.84.44.20 - 2018-04-05 19:01:06 (1 Times)
        90.84.44.20 - 2018-04-05 19:01:08 (1 Times)
        91.121.105.20 - 2018-04-05 14:21:39 (1 Times)
        91.121.105.20 - 2018-04-05 14:21:41 (1 Times)
        91.121.77.149 - 2018-04-05 04:28:28 (1 Times)
        91.121.77.149 - 2018-04-05 04:28:29 (1 Times)
        95.38.15.86 - 2018-04-05 22:13:11 (1 Times)
        95.38.15.86 - 2018-04-05 22:13:13 (1 Times)

 ---------------------- fail2ban-messages End -------------------------

```

#### 寻找源头

出于对我的防火墙上的这些攻击的来源的好奇，我开始收集这些电子邮件以便分析它们。它们通常如清单 [22-2](#FPar3) 所示。这是电子邮件的完整来源，因此您可以详细检查它。

### 清单 22-2

```sh
Received: from wally1.both.org (wally1.both.org [192.168.0.254])
        by bunkerhill.both.org (8.14.4/8.14.4) with ESMTP id w34E9NnR002675
        for <dboth@millennium-technology.com>; Wed, 4 Apr 2018 10:09:23 -0400
Received: from wally1.both.org (localhost [127.0.0.1])
        by wally1.both.org (8.15.2/8.15.2) with ESMTP id w34E9NTA013030
        for <dboth@millennium-technology.com>; Wed, 4 Apr 2018 10:09:23 -0400
Received: (from root@localhost)
        by wally1.both.org (8.15.2/8.15.2/Submit) id w34E9NBq013023
        for dboth@millennium-technology.com; Wed, 4 Apr 2018 10:09:23 -0400
Message-Id: <201804041409.w34E9NBq013023@wally1.both.org>
Subject: [Fail2Ban] SSH: banned 123.183.209.135 from wally1.both.org
Date: Wed, 04 Apr 2018 14:09:23 +0000
From: wally1 <wally1@both.org>
To: dboth@millennium-technology.com
X-Spam-Status: No, score=-48 required=10.6 tests=ALL_TRUSTED,BAYES_00,USER_IN_WHITELIST
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.83 on 192.168.0.51

Hi,

The IP 123.183.209.135 has just been banned by Fail2Ban after
3 attempts against SSH.

Here is more information about 123.183.209.135:

GeoIP Country Edition: CN, China

Regards,

Fail2Ban

```

这是我收到的电子邮件类型的一个典型例子。主题行包含来源的 IP 地址、报告攻击的主机名称和 Fail2ban 规则，在本例中是 SSH。我想使用原始 IP 地址来识别来源国。Fail2ban 规则集包括一个使用 GeoIP 的选项，geo IP 是一个搜索 IP 地址及其分配到的国家的数据库的程序，以确定攻击来自哪个国家。这是一个有趣的侧游，我安装它没有太大的困难。对于 Fedora，这是我的防火墙所使用的，GeoIP 位于 Fedora 存储库中。对于 CentOS，它位于 EPEL <sup>[5](#Fn5)</sup> 存储库中。

在收集了大量的 Fail2ban 邮件后，我把它们从雷鸟导出到一个主题行列表中。我编写了一个脚本来读取列表，并使用 GeoIP 来识别来源国家，并按频率生成国家列表。

最频繁和持续的攻击似乎来自亚洲的各个地区、东欧、南美的几个国家和美国。

#### 收集电子邮件

为了收集这些邮件，我开始使用雷鸟中可用的过滤器来识别 Fail2ban 发送的邮件，并将它们移动到特定的文件夹中。这工作正常，但我发现雷鸟过滤器并不总是准确的。这并不是造成问题的唯一过滤器。

我决定我需要一些不同的东西来过滤和分类我的邮件——所有的邮件，而不仅仅是 Fail2ban 的邮件。

#### procmail

我以前听说过 procmail。它作为默认的本地传递代理(LDA)安装在所有基于 Red Hat 的发行版上。这让我在这个项目中使用 procmail 变得不需要动脑筋。该项目是，首先，将 Fail2ban 发送的电子邮件分类到一个专门为他们准备的文件夹中，其次，也对其他电子邮件进行分类。

我还想解决一个技术问题。客户端电子邮件过滤依赖于在邮件存入收件箱后对其进行扫描。由于某种未知的原因，有时客户端不会从收件箱中删除(清除)已移动的邮件。这可能是雷鸟的问题(也可能是我的雷鸟配置的问题)。我多年来一直致力于解决这个问题，但没有成功，甚至通过多次完全重装 Fedora 和 Thunderbird 也没有成功。

为了解决这些多重问题，我需要一种基于服务器而不是基于客户端的方法来归档电子邮件(即，将它们分类到适当的文件夹中)。这将意味着，没有必要为了执行电子邮件分类而保持雷鸟或任何电子邮件客户端运行。

在对 procmail 做了一些研究后，我能够创建一个 procmail 规则，将收到的 Fail2ban 电子邮件分类到一个特定的文件夹中。我还创建了一些其他规则，将其他类型的电子邮件分类到不同的文件夹中。

虽然我使用 SpamAssassin 来识别垃圾邮件，但我现在使用 procmail 规则将垃圾邮件归档到我的垃圾邮件文件夹中。我还收到了一些 SpamAssassin 规则似乎永远无法识别的垃圾邮件。在不久的某个时候，每当看到我的收件箱里那些特定的垃圾邮件时，我会创建一个或多个规则来过滤它们。我也对我的垃圾邮件过滤的功效感到好奇，所以我没有删除垃圾邮件，而是将它存储了几天，以防我需要查看 SpamAssassin 分数来改进这些规则。

2017 年 11 月，我为 Opensource.com 写了一篇关于使用 SendMail、SpamAssassin、procmail 对邮件进行分类整理的文章 <sup>[6](#Fn6)</sup> 。它比我这里讲的更详细，是关于解决多个问题，而不仅仅是将 Fail2ban 邮件分类到一个特定的文件夹。

#### rkhunter

在看到每天有多少人试图侵入我的防火墙后，我更加担心了。因此，我对如何进行的好奇心引导我发现了根工具包。我决定开始专门寻找 root kits，这是安装在被黑客入侵的主机上的软件包。他们允许黑客访问主机，并根据自己的目的控制它。

确保没有安装 root kit——至少没有已知的——是一个名为 rkhunter 的软件工具执行的任务。我安装了 rkhunter 并定期运行它，以确保没有安装任何已知的根工具包。

当然，最后一句话表明了任何旨在扫描计算机系统中任何类型恶意软件的软件的问题——它只能找到已知的恶意软件，并且已经为其开发了签名。当你发现一个根包的时候，损害已经造成了，是时候清除一切并重新开始了。

我确实使用 rkhunter，但我并不仅仅依赖它来保证我的网络安全。

#### 嘘

我试图阻止的攻击是简单的脚本密码破解。因此，显而易见的步骤是确保密码基本上是不可破解的，并在我的网络内部使用 SSH 和公钥/私钥对(PPKP)进行系统间通信。

因此，我为所有内部系统设置了长度适中的密码，为防火墙主机设置了极长的密码。我一直使用 SSH 和 PPKPs 登录我网络上的其他主机，所以我在那里的操作程序没有重大变化。我不会在我的防火墙上描述这种设置的细节，因为它可能会为严重的黑客提供一些帮助。此外，这一部分更多的是关于我的好奇心带我去的方向，而不是关于我为保护我的系统所采取的所有步骤的细节。

所以这次对我的防火墙主机系统安全性的探索非常有启发性。我已经开始做一些非常基本的安全工作，但是直到我真正看到这个问题，我才完全理解这个问题的范围。一步一步，我的好奇心把我带进了保护我的系统的世界。我用这些知识来保护我和我的客户的系统。

如果这个问题没有被 Logwatch 清楚地提出来，我可能不会有足够的好奇心去探究安全和防火墙。因此，我的系统更加安全。

我还研究了我的系统上的一些其他安全选项，但是像各种形式的入侵检测这样的事情往往是在事后进行的，它们所带来的管理负载超过了我自己的系统所需要的。在这种情况下，风险降低并不能证明启用和维护风险所需的工作成本是合理的。

SELinux <sup>[7](#Fn7)</sup> 也默认安装在所有基于 Red Hat 的发行版上，我的好奇心也曾多次带我走上这条路。我发现——在我的环境中——它不适合在我的所有主机上使用。我确实在我的防火墙上启用了限制模式，因为这是我获得最大成果的地方。任何严重的攻击者都需要首先突破防火墙，这样就会触发警告，有人正试图侵入我的网络。然后，我可以在违规行为实际发生之前采取适当的措施。但是，请记住，没有完美的安全性这种东西。任何一套安全防范措施的目的都是让入侵您的系统在时间和精力上比坏人愿意付出的代价更高。归根结底是你能承受多大风险的问题。

这一切都是从我的好奇心开始的。我原本打算简化检查日志文件中潜在问题的任务。这让我想到了一些非常有趣的方向，其中最主要的是我的网络安全，尤其是防火墙。它还带我去了一些其他地方，我甚至没有在这里介绍，只是因为你应该已经明白这一点。

## 跟随你自己的好奇心

我已经不止一次地提到过，你应该探索 Linux 的许多方面，并且去你的好奇心引导你去的任何地方。只是通过跟随我的好奇心，首先是关于电子学，然后是计算机、编程、操作系统、OS/2、Linux、服务器、网络等等，我才能够做这么多有趣的事情。

你心中可能有具体的个人和职业目标，这可能会激发你的好奇心，带你去能帮助你实现这些目标的地方。你也可能是一个天生好奇的人，更倾向于对你特别感兴趣的事情好奇，而不执着于特定的目标。你的好奇心如何被驱使并不重要。重要的是你要跟随它，不要让任何人或任何事挫伤你的好奇心。

### 成为一名作家

我目前为 Opensource.com<sup>[8](#Fn8)</sup>写了许多文章，无论我写什么，我总是能学到新的东西，甚至是我已经熟悉的东西。我写过的每一篇文章，无论是为 *Linux 杂志*、 *Linux 杂志*还是 Opensource.com 写的，都是满足我好奇心和了解更多 Linux 知识的机会。

写这本书也不例外。甚至当我研究这本书的各个方面时，我学到了更多我已经知道的命令，并且我学到了一些新的命令。我让我的好奇心带我走上了本书中永远不会出现的道路，只是因为学习关于 Linux 的新事物很有趣，而且有太多东西需要学习。

找到我想写的话题几乎从来都不是问题。我通常用最近发生的事情作为我文章的主题。值得写的事情总是在发生。这只是一个识别它们并把故事用语言表达出来的问题。在写这本书的过程中发生了许多事情，这些事情成为了这本书的一部分；我在几章中提到了这些。

有时，当我偶尔努力将我的哲学转化为语言时，我对这一哲学有了更多的了解，了解了我是如何使用它的，以及它是如何帮助和指导我的。我了解到，在许多方面，我的哲学不仅仅是关于 Linux。

### 失败是一种选择

> 我没有失败。我刚刚发现了一万种行不通的方法。
> 
> —托马斯·A·爱迪生

虽然在测试过程中，数千种个别材料和制造技术的特定组合都失败了，但爱迪生还是继续实验。正是如此，未能解决问题或创建执行其定义任务的代码并不意味着项目或总体目标会失败。这只意味着特定的工具或方法没有产生成功的结果。

我从失败中学到的东西比其他任何方式都多。我尤其为那些自己造成的失败感到高兴。我不仅必须纠正我自己造成的问题，而且还必须找到并解决最初的问题。这总是会导致大量的研究，使我学到比快速解决原始问题更多的东西。

这是我的天性，我认为这是所有优秀系统管理员的天性，将这些情况视为学习机会。如前所述，我已经当了很多年的培训师，一些最有趣的经历是当我在教学时，演示、实验和实验室项目失败了。对我和我班上的学生来说，这些都是很棒的学习经历。有时我甚至把那些偶然的失败融入到以后的课程中，因为它们使我能够教授一些重要的东西。

### 做就是了

每个人都以自己的方式学得最好。作为一名培训师，我每次上课都会看到这种情况，不管是什么科目。追随我们的好奇心是一样的——我们都有那种引导我们发现更多的火花。我们的方法可能不尽相同，但它们会引导我们获得更多的知识和技能。

我开始在家里所有的电脑上安装 Linux。这迫使我学习 Linux，不回头。只要我有办法回到我的老的和众所周知的做事方式，我就没有必要真正学习 Linux。当我决定学习 Linux 时，我就是这么做的，它教会了我很大一部分知识。我有几台电脑，并在我的家庭办公室创建了一个完整的内部网络。这些年来，我的人际网络不断发展变化，每一次变化都让我学到了更多。这很大程度上是由我的好奇心驱动的，而不是任何特定的需求。

我有来自 ISP 的静态 IP 地址和两个防火墙来提供外部访问和保护我的内部网络。其中一个防火墙是树莓 Pi，上面有 CentOS。这些年来，我一直用英特尔盒子装着 Fedora 和 CentOS。我学到了很多关于在防火墙和路由器的角色中使用这两者的知识。

我有一台运行 DHCP、HTTP、SMTP、IMAP、NTP、DNS 和其他服务的服务器，以便为我的内部网络提供这些服务，并使其中一些服务对外部世界可用，例如我的网站和接收的电子邮件。我学到了很多关于在服务器角色中使用 Linux 的知识。我学到了很多关于实现和管理这些服务的知识。

我有几个台式工作站，一台笔记本电脑，一个 EeePC，都连接到我的有线网络。EeePC 和笔记本电脑也可以使用我的一个无线路由器进行连接；由于每月费用的原因，我不使用 ISP 提供的无线网络，也没有机会学习如何配置无线路由器。我还有几部智能手机、一部 Kindle 和一部 iPad。学习如何设置我的电子邮件服务器来最好地使用这些工具，同时尽最大努力以安全的方式提供这些服务是一项挑战。

对我来说，好奇心是学习的动力。我不能只是坐在教室里，因为有人说我需要学习特定的东西，并在这方面取得成功。我需要对这个主题感兴趣，并且需要一些能激起我好奇心的东西。这种在我喜欢的科目上更加努力学习的倾向在我上学期间非常明显，因为我在吸引我的科目上表现很好。

## 摘要

通过利用我的家庭网络来满足我的好奇心，我有了很多安全的空间，可以在灾难性的失败中学习从失败中恢复的最佳方法。失败的方式有很多，所以我学到了很多。当我不小心打碎东西时，我学到了最多，但当我故意打碎东西时，我也学到了很多。在这种情况下，我知道我想学什么，并可以针对破损的方式，使我能够了解这些具体的事情。

我也很幸运，因为我有几份工作需要，或者至少允许我上 Unix 和 Linux 各方面的课。对我来说，课堂作业是一种验证和巩固我自己所学知识的方式。这让我有机会与大多数知识渊博的老师交流，他们可以帮助和澄清我对自己无法理解的零碎内容的理解。

做一个好奇的系统管理员。对我很有效。

<aside class="FootnoteSection" epub:type="footnotes">Footnotes [1](#Fn1_source)

Wikipedia，*程序 101* ， [`https://en.wikipedia.org/wiki/Programma_101`](https://en.wikipedia.org/wiki/Programma_101)

  [2](#Fn2_source)

维基百科，*【ge-600】*、 [`https://en.wikipedia.org/wiki/GE-600_series`](https://en.wikipedia.org/wiki/GE-600_series)

  [3](#Fn3_source)

Wikipedia、 *IBM PC* 、 [`https://en.wikipedia.org/wiki/IBM_Personal_Computer`](https://en.wikipedia.org/wiki/IBM_Personal_Computer)

  [4](#Fn4_source)

Opensource.com，*标记职业*， [`https://opensource.com/tags/careers`](https://opensource.com/tags/careers)

  [5](#Fn5_source)

EPEL——企业 Linux 的额外软件包(Linux，RHEL，Fedora)

  [6](#Fn6_source)

都、大卫、 *SpamAssassin、MIMEDefang、Procmail:2017 最佳三重奏【Opensource.com、 [`https://opensource.com/article/17/11/spamassassin-mimedefang-and-procmail`](https://opensource.com/article/17/11/spamassassin-mimedefang-and-procmail)*

  [7](#Fn7_source)

克里斯·聂斌，*实用 Linux 话题*，2016 年 4 月，91 页，

  [8](#Fn8_source)

Opensource.com， [`https://opensource.com/`](https://opensource.com/)

 </aside>